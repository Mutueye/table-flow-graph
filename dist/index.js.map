{"version":3,"file":"index.js","sources":["../src/lib/dom.ts","../src/lib/utils.ts","../src/components/ui/icon/svgIconList.ts","../src/components/ui/icon/Icon.ts","../src/components/ui/tooltip/Tooltip.ts","../src/components/ui/button/Button.ts","../src/components/ui/toggler/Toggler.ts","../src/components/ui/dialog/Dialog.ts","../src/components/table/EditColumnDialog.ts","../src/components/toolbar/HintManager.ts","../src/components/toolbar/Toolbar.ts","../src/components/ui/popup/Popup.ts","../src/components/table/EditNodeDialog.ts","../src/components/table/TableCell.ts","../src/components/table/TableHeaderCell.ts","../src/components/table/TableMaskBox.ts","../src/components/table/TableMask.ts","../src/components/table/TableController.ts","../src/components/line/LineSegment.ts","../src/components/line/LineGroup.ts","../src/components/line/LineController.ts","../src/components/anchor/Anchor.ts","../src/components/anchor/AnchorController.ts","../src/index.ts"],"sourcesContent":["// HTMLElementTagNameMap from lib.dom.d.ts\ninterface HTMLElementTagNameMap {\n  a: HTMLAnchorElement;\n  abbr: HTMLElement;\n  address: HTMLElement;\n  area: HTMLAreaElement;\n  article: HTMLElement;\n  aside: HTMLElement;\n  audio: HTMLAudioElement;\n  b: HTMLElement;\n  base: HTMLBaseElement;\n  bdi: HTMLElement;\n  bdo: HTMLElement;\n  blockquote: HTMLQuoteElement;\n  body: HTMLBodyElement;\n  br: HTMLBRElement;\n  button: HTMLButtonElement;\n  canvas: HTMLCanvasElement;\n  caption: HTMLTableCaptionElement;\n  cite: HTMLElement;\n  code: HTMLElement;\n  col: HTMLTableColElement;\n  colgroup: HTMLTableColElement;\n  data: HTMLDataElement;\n  datalist: HTMLDataListElement;\n  dd: HTMLElement;\n  del: HTMLModElement;\n  details: HTMLDetailsElement;\n  dfn: HTMLElement;\n  dialog: HTMLDialogElement;\n  dir: HTMLDirectoryElement;\n  div: HTMLDivElement;\n  dl: HTMLDListElement;\n  dt: HTMLElement;\n  em: HTMLElement;\n  embed: HTMLEmbedElement;\n  fieldset: HTMLFieldSetElement;\n  figcaption: HTMLElement;\n  figure: HTMLElement;\n  font: HTMLFontElement;\n  footer: HTMLElement;\n  form: HTMLFormElement;\n  frame: HTMLFrameElement;\n  frameset: HTMLFrameSetElement;\n  h1: HTMLHeadingElement;\n  h2: HTMLHeadingElement;\n  h3: HTMLHeadingElement;\n  h4: HTMLHeadingElement;\n  h5: HTMLHeadingElement;\n  h6: HTMLHeadingElement;\n  head: HTMLHeadElement;\n  header: HTMLElement;\n  hgroup: HTMLElement;\n  hr: HTMLHRElement;\n  html: HTMLHtmlElement;\n  i: HTMLElement;\n  iframe: HTMLIFrameElement;\n  img: HTMLImageElement;\n  input: HTMLInputElement;\n  ins: HTMLModElement;\n  kbd: HTMLElement;\n  label: HTMLLabelElement;\n  legend: HTMLLegendElement;\n  li: HTMLLIElement;\n  link: HTMLLinkElement;\n  main: HTMLElement;\n  map: HTMLMapElement;\n  mark: HTMLElement;\n  marquee: HTMLMarqueeElement;\n  menu: HTMLMenuElement;\n  meta: HTMLMetaElement;\n  meter: HTMLMeterElement;\n  nav: HTMLElement;\n  noscript: HTMLElement;\n  object: HTMLObjectElement;\n  ol: HTMLOListElement;\n  optgroup: HTMLOptGroupElement;\n  option: HTMLOptionElement;\n  output: HTMLOutputElement;\n  p: HTMLParagraphElement;\n  param: HTMLParamElement;\n  picture: HTMLPictureElement;\n  pre: HTMLPreElement;\n  progress: HTMLProgressElement;\n  q: HTMLQuoteElement;\n  rp: HTMLElement;\n  rt: HTMLElement;\n  ruby: HTMLElement;\n  s: HTMLElement;\n  samp: HTMLElement;\n  script: HTMLScriptElement;\n  section: HTMLElement;\n  select: HTMLSelectElement;\n  slot: HTMLSlotElement;\n  small: HTMLElement;\n  source: HTMLSourceElement;\n  span: HTMLSpanElement;\n  strong: HTMLElement;\n  style: HTMLStyleElement;\n  sub: HTMLElement;\n  summary: HTMLElement;\n  sup: HTMLElement;\n  table: HTMLTableElement;\n  tbody: HTMLTableSectionElement;\n  td: HTMLTableCellElement;\n  template: HTMLTemplateElement;\n  textarea: HTMLTextAreaElement;\n  tfoot: HTMLTableSectionElement;\n  th: HTMLTableCellElement;\n  thead: HTMLTableSectionElement;\n  time: HTMLTimeElement;\n  title: HTMLTitleElement;\n  tr: HTMLTableRowElement;\n  track: HTMLTrackElement;\n  u: HTMLElement;\n  ul: HTMLUListElement;\n  var: HTMLElement;\n  video: HTMLVideoElement;\n  wbr: HTMLElement;\n}\n\n/**\n * Create an element with designated tagName，and add a className to it,\n * then append to parentNode if has one.\n * @param tagName\n * @param className\n * @param parentNode\n * @returns\n */\nexport function createClassElement<K extends keyof HTMLElementTagNameMap>(\n  tagName: K,\n  className: string,\n  parentNode: HTMLElement = null,\n): HTMLElementTagNameMap[K] {\n  const el = document.createElement(tagName);\n  el.className = className;\n  if (parentNode) parentNode.appendChild(el);\n  return el;\n}\n\nconst elMatches =\n  typeof Element !== 'undefined' &&\n  (Element.prototype.matches || Element.prototype.webkitMatchesSelector);\n\nexport function matches(element: HTMLElement, query: string): boolean {\n  if (!elMatches) {\n    throw new Error('No element matching method supported');\n  }\n\n  return elMatches.call(element, query);\n}\n\n/**\n * Delete a dom element\n * @param {HTMLElement} element\n */\nexport function removeElement(element: HTMLElement) {\n  if (element) {\n    if (element.remove) {\n      element.remove();\n    } else {\n      if (element.parentNode) {\n        element.parentNode.removeChild(element);\n      }\n    }\n  }\n}\n\nexport function queryChildren(element: HTMLElement, selector: string): HTMLElement[] {\n  return Array.prototype.filter.call(element.children, (child: HTMLElement) =>\n    matches(child, selector),\n  );\n}\n\nexport function getStyles(element: HTMLElement): CSSStyleDeclaration {\n  return getComputedStyle(element);\n}\n\nexport function setStyles(element: HTMLElement, obj: Partial<CSSStyleDeclaration>) {\n  for (const key in obj) {\n    let val = obj[key];\n    if (typeof val === 'number') {\n      val = `${val}px`;\n    }\n    element.style[key] = val;\n  }\n  return element;\n}\n\nexport const createElementFromHtmlString = (htmlString: string) => {\n  const div = document.createElement('div');\n  div.innerHTML = htmlString.trim();\n\n  // Change this to div.childNodes to support multiple top-level nodes.\n  return div.firstChild as HTMLElement;\n};\n","// eslint-disable-next-line @typescript-eslint/ban-types\nexport function debounce<F extends Function>(func: F, wait: number): F {\n  let timeoutID: number;\n\n  if (!Number.isInteger(wait)) {\n    console.warn('Call debounce without a valid number');\n    wait = 300;\n  }\n\n  // conversion through any necessary as it wont satisfy criteria otherwise\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return <any>function (this: any, ...args: any[]) {\n    clearTimeout(timeoutID);\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const context = this;\n\n    timeoutID = window.setTimeout(function () {\n      func.apply(context, args);\n    }, wait);\n  };\n}\n\n// check if last column/row deleteable by occupiedList\nexport const setColumnAndRowDeletable = (\n  occupiedList: number[][],\n  totalRows: number,\n  totalColumns: number,\n) => {\n  let canDeleteColumn = true;\n  let canDeleteRow = true;\n  for (let i = 0; i < totalRows - 1; i++) {\n    if (occupiedList[i][totalColumns - 1] !== 0) {\n      canDeleteColumn = false;\n    }\n  }\n  for (let i = 0; i < totalColumns - 1; i++) {\n    if (occupiedList[totalRows - 1][i] !== 0) {\n      canDeleteRow = false;\n    }\n  }\n  return { canDeleteRow, canDeleteColumn };\n};\n\nexport const uniqId = () => {\n  const eles = window.document.getElementsByTagName('body');\n  const bodyObj = eles.item(0);\n  const c = bodyObj.innerHTML.length;\n  const t = new Date().getTime();\n  const n = Math.floor(Math.random() * 100 + 1);\n  return c.toString() + t.toString() + n.toString();\n};\n","const svgIconList = {\n  edit: '<svg t=\"1657530672054\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"8212\" width=\"200\" height=\"200\"><path d=\"M712.96 268.373333l-128-128c-16.64-16.64-43.52-16.64-60.16 0l-384 384c-8.106667 8.106667-12.373333 18.773333-12.373333 30.293334v128c0 23.466667 19.2 42.666667 42.666666 42.666666h128c11.093333 0 22.186667-4.266667 30.293334-12.373333l264.106666-264.106667 22.186667-22.186666 97.706667-97.706667c16.213333-16.64 16.213333-43.946667-0.426667-60.586667zM281.173333 640H213.333333v-67.84l232.533334-232.533333 67.84 67.84L281.173333 640z m292.693334-292.693333l-67.84-67.84L554.666667 230.826667 622.506667 298.666667l-48.64 48.64zM853.333333 896H170.666667c-23.466667 0-42.666667-19.2-42.666667-42.666667s19.2-42.666667 42.666667-42.666666h682.666666c23.466667 0 42.666667 19.2 42.666667 42.666666s-19.2 42.666667-42.666667 42.666667z\" p-id=\"8213\"></path></svg>',\n  plus: '<svg t=\"1657533725416\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4984\" width=\"200\" height=\"200\"><path d=\"M512 85.333333C276.906667 85.333333 85.333333 276.906667 85.333333 512s191.573333 426.666667 426.666667 426.666667 426.666667-191.573333 426.666667-426.666667S747.093333 85.333333 512 85.333333z m0 768c-188.16 0-341.333333-153.173333-341.333333-341.333333s153.173333-341.333333 341.333333-341.333333 341.333333 153.173333 341.333333 341.333333-153.173333 341.333333-341.333333 341.333333z\" p-id=\"4985\"></path><path d=\"M725.333333 512c0 23.466667-19.2 42.666667-42.666666 42.666667h-128v128c0 23.466667-19.2 42.666667-42.666667 42.666666s-42.666667-19.2-42.666667-42.666666v-128H341.333333c-23.466667 0-42.666667-19.2-42.666666-42.666667s19.2-42.666667 42.666666-42.666667h128V341.333333c0-23.466667 19.2-42.666667 42.666667-42.666666s42.666667 19.2 42.666667 42.666666v128h128c23.466667 0 42.666667 19.2 42.666666 42.666667z\" p-id=\"4986\"></path></svg>',\n  x: '<svg t=\"1657533744067\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"5120\" width=\"200\" height=\"200\"><path d=\"M512 85.333333C276.906667 85.333333 85.333333 276.906667 85.333333 512s191.573333 426.666667 426.666667 426.666667 426.666667-191.573333 426.666667-426.666667S747.093333 85.333333 512 85.333333z m0 768c-188.16 0-341.333333-153.173333-341.333333-341.333333s153.173333-341.333333 341.333333-341.333333 341.333333 153.173333 341.333333 341.333333-153.173333 341.333333-341.333333 341.333333z\" p-id=\"5121\"></path><path d=\"M663.04 602.453333c16.64 16.64 16.64 43.52 0 60.16-8.533333 8.533333-19.2 12.373333-30.293333 12.373334-11.093333 0-21.76-4.266667-30.293334-12.373334L512 572.16l-90.453333 90.453333c-8.533333 8.533333-19.2 12.373333-30.293334 12.373334-11.093333 0-21.76-4.266667-30.293333-12.373334-16.64-16.64-16.64-43.52 0-60.16l90.453333-90.453333-90.453333-90.453333c-16.64-16.64-16.64-43.52 0-60.16 16.64-16.64 43.52-16.64 60.16 0l90.453333 90.453333 90.453334-90.453333c16.64-16.64 43.52-16.64 60.16 0 16.64 16.64 16.64 43.52 0 60.16l-89.6 90.453333 90.453333 90.453333z\" p-id=\"5122\"></path></svg>',\n  x2: '<svg t=\"1660284061189\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"59188\" width=\"200\" height=\"200\"><path d=\"M755.626667 695.04c16.64 16.64 16.64 43.52 0 60.16-8.533333 8.533333-19.2 12.373333-30.293334 12.373333s-21.76-4.266667-30.293333-12.373333L512 572.16 328.96 755.2c-8.533333 8.533333-19.2 12.373333-30.293333 12.373333s-21.76-4.266667-30.293334-12.373333c-16.64-16.64-16.64-43.52 0-60.16l183.04-183.04-183.04-183.04C251.733333 312.32 251.733333 285.44 268.373333 268.8c16.64-16.64 43.52-16.64 60.16 0l183.04 183.04L694.613333 268.8c16.64-16.64 43.52-16.64 60.16 0 16.64 16.64 16.64 43.52 0 60.16L572.16 512l183.466667 183.04z\" p-id=\"59189\"></path></svg>',\n  expand:\n    '<svg t=\"1658744557448\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9385\" width=\"200\" height=\"200\"><path d=\"M170.666667 394.24c-23.466667 0-42.666667-19.2-42.666667-42.666667V170.666667c0-23.466667 19.2-42.666667 42.666667-42.666667h180.906666c23.466667 0 42.666667 19.2 42.666667 42.666667s-19.2 42.666667-42.666667 42.666666H213.333333v138.24c0 23.466667-19.2 42.666667-42.666666 42.666667zM672.426667 896c-23.466667 0-42.666667-19.2-42.666667-42.666667s19.2-42.666667 42.666667-42.666666H810.666667v-138.24c0-23.466667 19.2-42.666667 42.666666-42.666667s42.666667 19.2 42.666667 42.666667V853.333333c0 23.466667-19.2 42.666667-42.666667 42.666667h-180.906666zM170.666667 896c-11.52 0-22.186667-4.693333-30.293334-12.373333-8.106667-8.106667-12.373333-18.773333-12.373333-30.293334v-180.906666c0-23.466667 19.2-42.666667 42.666667-42.666667s42.666667 19.2 42.666666 42.666667V810.666667h138.24c23.466667 0 42.666667 19.2 42.666667 42.666666s-19.2 42.666667-42.666667 42.666667H170.666667zM853.333333 394.24c-23.466667 0-42.666667-19.2-42.666666-42.666667V213.333333h-138.24c-23.466667 0-42.666667-19.2-42.666667-42.666666s19.2-42.666667 42.666667-42.666667H853.333333c11.52 0 22.186667 4.693333 30.293334 12.373333 8.106667 8.106667 12.373333 18.773333 12.373333 30.293334v180.906666c0 23.466667-19.2 42.666667-42.666667 42.666667z\" p-id=\"9386\"></path></svg>',\n  move: '<svg t=\"1658744606420\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9520\" width=\"200\" height=\"200\"><path d=\"M426.666667 512c0 23.466667-19.2 42.666667-42.666667 42.666667H230.826667L285.866667 609.706667c16.64 16.64 16.64 43.52 0 60.16-8.106667 8.533333-19.2 12.373333-30.293334 12.373333s-21.76-4.266667-30.293333-12.373333l-128-128c-16.64-16.64-16.64-43.52 0-60.16l128-128c16.64-16.64 43.52-16.64 60.16 0 16.64 16.64 16.64 43.52 0 60.16l-54.613333 55.466666H384c23.466667 0 42.666667 19.2 42.666667 42.666667zM926.293333 542.293333l-128 128c-8.106667 8.533333-19.2 12.373333-30.293333 12.373334s-21.76-4.266667-30.293333-12.373334c-16.64-16.64-16.64-43.52 0-60.16l55.04-55.04H640c-23.466667 0-42.666667-19.2-42.666667-42.666666s19.2-42.666667 42.666667-42.666667h153.173333L738.133333 414.72c-16.64-16.64-16.64-43.52 0-60.16 16.64-16.64 43.52-16.64 60.16 0l128 128c16.64 15.786667 16.64 43.093333 0 59.733333zM670.293333 798.293333l-128 128c-8.106667 8.106667-18.773333 12.373333-30.293333 12.373334s-22.186667-4.693333-30.293333-12.373334l-128-128c-16.64-16.64-16.64-43.52 0-60.16 16.64-16.64 43.52-16.64 60.16 0l55.04 55.04V640c0-23.466667 19.2-42.666667 42.666666-42.666667s42.666667 19.2 42.666667 42.666667v153.173333l55.04-55.04c16.64-16.64 43.52-16.64 60.16 0 17.493333 16.213333 17.493333 43.52 0.853333 60.16zM670.293333 286.293333c-16.64 16.64-43.52 16.64-60.16 0l-55.466666-55.466666V384c0 23.466667-19.2 42.666667-42.666667 42.666667s-42.666667-19.2-42.666667-42.666667V230.826667l-55.04 55.466666C405.76 294.4 395.093333 298.666667 384 298.666667s-21.76-4.266667-30.293333-12.373334C337.066667 269.653333 337.066667 242.773333 353.706667 226.133333l128-128c16.64-16.64 43.52-16.64 60.16 0l128 128c17.066667 16.213333 17.066667 43.52 0.426666 60.16z\" p-id=\"9521\"></path></svg>',\n  remove:\n    '<svg t=\"1658744626586\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9655\" width=\"200\" height=\"200\"><path d=\"M405.333333 768c-23.466667 0-42.666667-19.2-42.666666-42.666667v-256c0-23.466667 19.2-42.666667 42.666666-42.666666s42.666667 19.2 42.666667 42.666666v256c0 23.466667-19.2 42.666667-42.666667 42.666667zM618.666667 768c-23.466667 0-42.666667-19.2-42.666667-42.666667v-256c0-23.466667 19.2-42.666667 42.666667-42.666666s42.666667 19.2 42.666666 42.666666v256c0 23.466667-19.2 42.666667-42.666666 42.666667z\" p-id=\"9656\"></path><path d=\"M896 256h-170.666667V128c0-23.466667-19.2-42.666667-42.666666-42.666667H341.333333c-23.466667 0-42.666667 19.2-42.666666 42.666667v128H128c-23.466667 0-42.666667 19.2-42.666667 42.666667s19.2 42.666667 42.666667 42.666666h42.666667v554.666667c0 23.466667 19.2 42.666667 42.666666 42.666667h597.333334c23.466667 0 42.666667-19.2 42.666666-42.666667V341.333333h42.666667c23.466667 0 42.666667-19.2 42.666667-42.666666s-19.2-42.666667-42.666667-42.666667zM384 170.666667h256v85.333333H384V170.666667z m384 682.666666H256V341.333333h512v512z\" p-id=\"9657\"></path></svg>',\n  delete_row:\n    '<svg t=\"1659516333894\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"12036\" width=\"200\" height=\"200\"><path d=\"M663.04 602.453333c16.64 16.64 16.64 43.52 0 60.16-8.533333 8.106667-19.2 12.373333-30.293333 12.373334-11.093333 0-21.76-4.266667-30.293334-12.373334L512 572.586667l-90.453333 90.453333c-8.106667 8.106667-19.2 12.373333-30.293334 12.373333-11.093333 0-21.76-4.266667-30.293333-12.373333-16.64-16.64-16.64-43.52 0-60.16l90.453333-90.453333-90.453333-90.88c-16.64-16.64-16.64-43.52 0-60.586667 16.64-16.64 43.52-16.64 60.16 0l90.453333 90.453333 90.453334-90.453333c16.64-16.64 43.52-16.64 60.16 0 16.64 16.64 16.64 43.52 0 60.586667L572.16 512l90.88 90.453333zM896 170.666667c0 23.466667-19.2 42.666667-42.666667 42.666666H170.666667c-23.466667 0-42.666667-19.2-42.666667-42.666666s19.2-42.666667 42.666667-42.666667h682.666666c23.466667 0 42.666667 19.2 42.666667 42.666667zM853.333333 896H170.666667c-23.466667 0-42.666667-19.2-42.666667-42.666667s19.2-42.666667 42.666667-42.666666h682.666666c23.466667 0 42.666667 19.2 42.666667 42.666666s-19.2 42.666667-42.666667 42.666667z\" p-id=\"12037\"></path></svg>',\n  delete_col:\n    '<svg t=\"1659516365239\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"12171\" width=\"200\" height=\"200\"><path d=\"M421.546667 663.04c-16.64 16.64-43.52 16.64-60.16 0-8.106667-8.533333-12.373333-19.2-12.373334-30.293333 0-11.093333 4.266667-21.76 12.373334-30.293334l90.453333-90.453333-90.88-90.453333c-8.106667-8.106667-12.373333-19.2-12.373333-30.293334 0-11.093333 4.266667-21.76 12.373333-30.293333 16.64-16.64 43.52-16.64 60.16 0l90.453333 90.453333 90.453334-90.453333c16.64-16.64 43.52-16.64 60.586666 0 16.64 16.64 16.64 43.52 0 60.16L572.16 512l90.453333 90.453333c16.64 16.64 16.64 43.52 0 60.16-16.64 16.64-43.52 16.64-60.586666 0L512 572.16l-90.453333 90.88zM853.333333 896c-23.466667 0-42.666667-19.2-42.666666-42.666667V170.666667c0-23.466667 19.2-42.666667 42.666666-42.666667s42.666667 19.2 42.666667 42.666667v682.666666c0 23.466667-19.2 42.666667-42.666667 42.666667zM128 853.333333V170.666667c0-23.466667 19.2-42.666667 42.666667-42.666667s42.666667 19.2 42.666666 42.666667v682.666666c0 23.466667-19.2 42.666667-42.666666 42.666667s-42.666667-19.2-42.666667-42.666667z\" p-id=\"12172\"></path></svg>',\n};\n\nexport default svgIconList;\n","import { createElementFromHtmlString, setStyles } from '../../../lib/dom';\nimport svgIconList from './svgIconList';\n\n// const svgIconList = {\n//   edit: '<svg t=\"1657530672054\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"8212\" width=\"200\" height=\"200\"><path d=\"M712.96 268.373333l-128-128c-16.64-16.64-43.52-16.64-60.16 0l-384 384c-8.106667 8.106667-12.373333 18.773333-12.373333 30.293334v128c0 23.466667 19.2 42.666667 42.666666 42.666666h128c11.093333 0 22.186667-4.266667 30.293334-12.373333l264.106666-264.106667 22.186667-22.186666 97.706667-97.706667c16.213333-16.64 16.213333-43.946667-0.426667-60.586667zM281.173333 640H213.333333v-67.84l232.533334-232.533333 67.84 67.84L281.173333 640z m292.693334-292.693333l-67.84-67.84L554.666667 230.826667 622.506667 298.666667l-48.64 48.64zM853.333333 896H170.666667c-23.466667 0-42.666667-19.2-42.666667-42.666667s19.2-42.666667 42.666667-42.666666h682.666666c23.466667 0 42.666667 19.2 42.666667 42.666666s-19.2 42.666667-42.666667 42.666667z\" p-id=\"8213\"></path></svg>',\n//   plus: '<svg t=\"1657533725416\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4984\" width=\"200\" height=\"200\"><path d=\"M512 85.333333C276.906667 85.333333 85.333333 276.906667 85.333333 512s191.573333 426.666667 426.666667 426.666667 426.666667-191.573333 426.666667-426.666667S747.093333 85.333333 512 85.333333z m0 768c-188.16 0-341.333333-153.173333-341.333333-341.333333s153.173333-341.333333 341.333333-341.333333 341.333333 153.173333 341.333333 341.333333-153.173333 341.333333-341.333333 341.333333z\" p-id=\"4985\"></path><path d=\"M725.333333 512c0 23.466667-19.2 42.666667-42.666666 42.666667h-128v128c0 23.466667-19.2 42.666667-42.666667 42.666666s-42.666667-19.2-42.666667-42.666666v-128H341.333333c-23.466667 0-42.666667-19.2-42.666666-42.666667s19.2-42.666667 42.666666-42.666667h128V341.333333c0-23.466667 19.2-42.666667 42.666667-42.666666s42.666667 19.2 42.666667 42.666666v128h128c23.466667 0 42.666667 19.2 42.666666 42.666667z\" p-id=\"4986\"></path></svg>',\n//   x: '<svg t=\"1657533744067\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"5120\" width=\"200\" height=\"200\"><path d=\"M512 85.333333C276.906667 85.333333 85.333333 276.906667 85.333333 512s191.573333 426.666667 426.666667 426.666667 426.666667-191.573333 426.666667-426.666667S747.093333 85.333333 512 85.333333z m0 768c-188.16 0-341.333333-153.173333-341.333333-341.333333s153.173333-341.333333 341.333333-341.333333 341.333333 153.173333 341.333333 341.333333-153.173333 341.333333-341.333333 341.333333z\" p-id=\"5121\"></path><path d=\"M663.04 602.453333c16.64 16.64 16.64 43.52 0 60.16-8.533333 8.533333-19.2 12.373333-30.293333 12.373334-11.093333 0-21.76-4.266667-30.293334-12.373334L512 572.16l-90.453333 90.453333c-8.533333 8.533333-19.2 12.373333-30.293334 12.373334-11.093333 0-21.76-4.266667-30.293333-12.373334-16.64-16.64-16.64-43.52 0-60.16l90.453333-90.453333-90.453333-90.453333c-16.64-16.64-16.64-43.52 0-60.16 16.64-16.64 43.52-16.64 60.16 0l90.453333 90.453333 90.453334-90.453333c16.64-16.64 43.52-16.64 60.16 0 16.64 16.64 16.64 43.52 0 60.16l-89.6 90.453333 90.453333 90.453333z\" p-id=\"5122\"></path></svg>',\n//   expand:\n//     '<svg t=\"1658744557448\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9385\" width=\"200\" height=\"200\"><path d=\"M170.666667 394.24c-23.466667 0-42.666667-19.2-42.666667-42.666667V170.666667c0-23.466667 19.2-42.666667 42.666667-42.666667h180.906666c23.466667 0 42.666667 19.2 42.666667 42.666667s-19.2 42.666667-42.666667 42.666666H213.333333v138.24c0 23.466667-19.2 42.666667-42.666666 42.666667zM672.426667 896c-23.466667 0-42.666667-19.2-42.666667-42.666667s19.2-42.666667 42.666667-42.666666H810.666667v-138.24c0-23.466667 19.2-42.666667 42.666666-42.666667s42.666667 19.2 42.666667 42.666667V853.333333c0 23.466667-19.2 42.666667-42.666667 42.666667h-180.906666zM170.666667 896c-11.52 0-22.186667-4.693333-30.293334-12.373333-8.106667-8.106667-12.373333-18.773333-12.373333-30.293334v-180.906666c0-23.466667 19.2-42.666667 42.666667-42.666667s42.666667 19.2 42.666666 42.666667V810.666667h138.24c23.466667 0 42.666667 19.2 42.666667 42.666666s-19.2 42.666667-42.666667 42.666667H170.666667zM853.333333 394.24c-23.466667 0-42.666667-19.2-42.666666-42.666667V213.333333h-138.24c-23.466667 0-42.666667-19.2-42.666667-42.666666s19.2-42.666667 42.666667-42.666667H853.333333c11.52 0 22.186667 4.693333 30.293334 12.373333 8.106667 8.106667 12.373333 18.773333 12.373333 30.293334v180.906666c0 23.466667-19.2 42.666667-42.666667 42.666667z\" p-id=\"9386\"></path></svg>',\n//   move: '<svg t=\"1658744606420\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9520\" width=\"200\" height=\"200\"><path d=\"M426.666667 512c0 23.466667-19.2 42.666667-42.666667 42.666667H230.826667L285.866667 609.706667c16.64 16.64 16.64 43.52 0 60.16-8.106667 8.533333-19.2 12.373333-30.293334 12.373333s-21.76-4.266667-30.293333-12.373333l-128-128c-16.64-16.64-16.64-43.52 0-60.16l128-128c16.64-16.64 43.52-16.64 60.16 0 16.64 16.64 16.64 43.52 0 60.16l-54.613333 55.466666H384c23.466667 0 42.666667 19.2 42.666667 42.666667zM926.293333 542.293333l-128 128c-8.106667 8.533333-19.2 12.373333-30.293333 12.373334s-21.76-4.266667-30.293333-12.373334c-16.64-16.64-16.64-43.52 0-60.16l55.04-55.04H640c-23.466667 0-42.666667-19.2-42.666667-42.666666s19.2-42.666667 42.666667-42.666667h153.173333L738.133333 414.72c-16.64-16.64-16.64-43.52 0-60.16 16.64-16.64 43.52-16.64 60.16 0l128 128c16.64 15.786667 16.64 43.093333 0 59.733333zM670.293333 798.293333l-128 128c-8.106667 8.106667-18.773333 12.373333-30.293333 12.373334s-22.186667-4.693333-30.293333-12.373334l-128-128c-16.64-16.64-16.64-43.52 0-60.16 16.64-16.64 43.52-16.64 60.16 0l55.04 55.04V640c0-23.466667 19.2-42.666667 42.666666-42.666667s42.666667 19.2 42.666667 42.666667v153.173333l55.04-55.04c16.64-16.64 43.52-16.64 60.16 0 17.493333 16.213333 17.493333 43.52 0.853333 60.16zM670.293333 286.293333c-16.64 16.64-43.52 16.64-60.16 0l-55.466666-55.466666V384c0 23.466667-19.2 42.666667-42.666667 42.666667s-42.666667-19.2-42.666667-42.666667V230.826667l-55.04 55.466666C405.76 294.4 395.093333 298.666667 384 298.666667s-21.76-4.266667-30.293333-12.373334C337.066667 269.653333 337.066667 242.773333 353.706667 226.133333l128-128c16.64-16.64 43.52-16.64 60.16 0l128 128c17.066667 16.213333 17.066667 43.52 0.426666 60.16z\" p-id=\"9521\"></path></svg>',\n//   remove:\n//     '<svg t=\"1658744626586\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9655\" width=\"200\" height=\"200\"><path d=\"M405.333333 768c-23.466667 0-42.666667-19.2-42.666666-42.666667v-256c0-23.466667 19.2-42.666667 42.666666-42.666666s42.666667 19.2 42.666667 42.666666v256c0 23.466667-19.2 42.666667-42.666667 42.666667zM618.666667 768c-23.466667 0-42.666667-19.2-42.666667-42.666667v-256c0-23.466667 19.2-42.666667 42.666667-42.666666s42.666667 19.2 42.666666 42.666666v256c0 23.466667-19.2 42.666667-42.666666 42.666667z\" p-id=\"9656\"></path><path d=\"M896 256h-170.666667V128c0-23.466667-19.2-42.666667-42.666666-42.666667H341.333333c-23.466667 0-42.666667 19.2-42.666666 42.666667v128H128c-23.466667 0-42.666667 19.2-42.666667 42.666667s19.2 42.666667 42.666667 42.666666h42.666667v554.666667c0 23.466667 19.2 42.666667 42.666666 42.666667h597.333334c23.466667 0 42.666667-19.2 42.666666-42.666667V341.333333h42.666667c23.466667 0 42.666667-19.2 42.666667-42.666666s-19.2-42.666667-42.666667-42.666667zM384 170.666667h256v85.333333H384V170.666667z m384 682.666666H256V341.333333h512v512z\" p-id=\"9657\"></path></svg>',\n// };\n\nexport class Icon {\n  public element: HTMLElement;\n  constructor(\n    parentElement: HTMLElement | null,\n    options: {\n      name: string;\n      size?: number;\n      color?: string;\n      className?: string;\n      style?: Partial<CSSStyleDeclaration>;\n    },\n  ) {\n    const targetIcon = svgIconList[options.name];\n    if (targetIcon) {\n      this.element = createElementFromHtmlString(svgIconList[options.name]);\n      const size = options.size ? options.size : 16;\n      const color = options.color ? options.color : '#333333';\n      const styleObj: Partial<CSSStyleDeclaration> = {\n        width: size + 'px',\n        height: size + 'px',\n      };\n      if (options.color) {\n        styleObj.fill = color;\n        styleObj.color = color;\n      }\n      setStyles(this.element, styleObj);\n      if (options.style) {\n        setStyles(this.element, options.style);\n      }\n      if (options.className) this.element.setAttribute('class', options.className);\n      this.element.classList.add('tfgraph-icon');\n      parentElement.appendChild(this.element);\n    }\n  }\n}\n","import { createClassElement, removeElement, setStyles } from '../../../lib/dom';\nimport { TooltipOptoins } from '../../../types';\n\n/**\n * table-flow-graph popup\n */\nexport default class Tooltip {\n  targetElement: HTMLElement;\n  options: TooltipOptoins;\n  public element: HTMLElement;\n  public areaElement: HTMLElement;\n  public boxElement: HTMLElement;\n  public arrowElement: HTMLElement;\n  public disabled: boolean;\n  public rendered: boolean;\n  public dismissTimeoutId: number | null;\n  public showTimeoutId: number | null;\n\n  constructor(targetElement: HTMLElement, options: TooltipOptoins) {\n    this.targetElement = targetElement;\n    this.options = options;\n    this.rendered = false;\n    this.targetElement.addEventListener('mouseenter', () => this.mouseEnter());\n    this.targetElement.addEventListener('mouseleave', () => this.mouseLeave());\n  }\n\n  public render() {\n    const { placement = 'top', label } = this.options;\n\n    const targetRect = this.targetElement.getBoundingClientRect();\n    this.element = createClassElement('div', 'tfgraph-tooltip', document.body);\n    setStyles(this.element, {\n      left: targetRect.left + 0.5 * targetRect.width + 'px',\n      top: targetRect.top + 0.5 * targetRect.height + 'px',\n    });\n\n    this.areaElement = createClassElement('div', `tfgraph-tooltip-area ${placement}`, this.element);\n    this.boxElement = createClassElement('div', 'tfgraph-tooltip-box', this.areaElement);\n    this.arrowElement = createClassElement('div', 'tfgraph-tooltip-arrow', this.areaElement);\n    if (label) this.boxElement.innerHTML = label;\n\n    const areaRect = this.areaElement.getBoundingClientRect();\n    const arrowRect = this.arrowElement.getBoundingClientRect();\n    const areaStyleObj: Partial<CSSStyleDeclaration> = {};\n    const arrowStyleObj: Partial<CSSStyleDeclaration> = {};\n    switch (placement) {\n      case 'top':\n        areaStyleObj.left = -0.5 * areaRect.width + 'px';\n        areaStyleObj.bottom = 0.5 * targetRect.height + 10 + 'px';\n        arrowStyleObj.left = 0.5 * (areaRect.width - arrowRect.width) + 'px';\n        break;\n      case 'right':\n        areaStyleObj.left = 0.5 * targetRect.width + 'px';\n        areaStyleObj.top = -0.5 * areaRect.height + 'px';\n        arrowStyleObj.top = 0.5 * (areaRect.height - arrowRect.height) + 'px';\n        break;\n      case 'bottom':\n        areaStyleObj.left = -0.5 * areaRect.width + 'px';\n        areaStyleObj.top = 0.5 * targetRect.height + 'px';\n        arrowStyleObj.left = 0.5 * (areaRect.width - arrowRect.width) + 'px';\n        break;\n      case 'left':\n        areaStyleObj.right = 0.5 * targetRect.width + 'px';\n        areaStyleObj.top = -0.5 * areaRect.height + 'px';\n        arrowStyleObj.top = 0.5 * (areaRect.height - arrowRect.height) + 'px';\n        break;\n      default:\n        break;\n    }\n    setStyles(this.areaElement, areaStyleObj);\n    setStyles(this.arrowElement, arrowStyleObj);\n\n    this.rendered = true;\n    if (this.showTimeoutId) {\n      window.clearTimeout(this.showTimeoutId);\n      this.showTimeoutId = null;\n    }\n  }\n\n  public dismiss() {\n    this.rendered = false;\n    this.targetElement.removeEventListener('mouseenter', () => this.mouseEnter());\n    this.targetElement.removeEventListener('mouseleave', () => this.mouseLeave());\n    if (this.element) removeElement(this.element);\n  }\n\n  public mouseEnter() {\n    if (!this.rendered && !this.showTimeoutId) {\n      this.showTimeoutId = window.setTimeout(() => {\n        this.render();\n      }, 500);\n    }\n    if (this.dismissTimeoutId) {\n      window.clearTimeout(this.dismissTimeoutId);\n    }\n  }\n\n  public mouseLeave() {\n    if (this.showTimeoutId) {\n      window.clearTimeout(this.showTimeoutId);\n      this.showTimeoutId = null;\n    }\n    this.dismissTimeoutId = window.setTimeout(() => {\n      this.dismiss();\n    }, 50);\n  }\n}\n","import { createClassElement } from '../../../lib/dom';\nimport { BtnOptions } from '../../../types';\nimport { Icon } from '../icon/Icon';\nimport Tooltip from '../tooltip/Tooltip';\n\n/**\n * table-flow-graph button\n */\nexport default class Button {\n  public element: HTMLElement;\n  public disabled: boolean;\n  public btnToolTip: Tooltip;\n\n  constructor(parentElement: HTMLElement, options: BtnOptions) {\n    const { label, type, onClick, icon, tooltip } = options;\n    let className = 'tfgraph-button is-hoverable';\n    if (options.className) className += ' ' + options.className;\n    className += ' ' + (type ? type : 'default');\n    this.element = createClassElement('button', className, parentElement);\n    if (icon) new Icon(this.element, { name: icon, size: 16, className: label ? 'mr-5' : '' });\n    if (label) {\n      createClassElement('span', '', this.element).innerHTML = label;\n    }\n    if (tooltip) this.btnToolTip = new Tooltip(this.element, { label: tooltip });\n\n    this.element.addEventListener('click', (e) => {\n      if (this.btnToolTip) this.btnToolTip.dismiss();\n      if (this.disabled) return;\n      if (typeof onClick === 'function') {\n        onClick(e);\n      }\n    });\n  }\n\n  setDisabled() {\n    this.disabled = true;\n    this.element.classList.add('disabled');\n  }\n\n  setEnabled() {\n    this.disabled = false;\n    this.element.classList.remove('disabled');\n  }\n}\n","import { createClassElement, setStyles } from '../../../lib/dom';\nimport { TogglerOptions, TogglerButton } from '../../../types';\n\n/**\n * table-flow-graph toggler btn group\n */\nexport default class Toggler {\n  public element: HTMLElement;\n  public indicatorEl: HTMLElement;\n  public btnContainerEl: HTMLElement;\n  public disabled: boolean;\n  public activeIndex: number;\n  public btnList: TogglerButton[] = [];\n\n  constructor(parentElement: HTMLElement, options: TogglerOptions) {\n    const { items, initialActiveIndex, onChange } = options;\n    this.element = createClassElement('div', 'tfgraph-toggler', parentElement);\n    this.indicatorEl = createClassElement('div', 'tfgraph-toggler-indicator', this.element);\n    this.btnContainerEl = createClassElement('div', 'flex flex-row items-center', this.element);\n    items.forEach((item, index) => {\n      const el = createClassElement('button', 'tfgraph-toggler-btn', this.btnContainerEl);\n      el.innerHTML = item.label;\n      this.btnList.push({ itemData: item, el, index });\n      el.addEventListener('click', () => {\n        this.setActive(index);\n        if (typeof onChange === 'function') onChange(item, index);\n      });\n    });\n    this.setActive(typeof initialActiveIndex === 'number' ? initialActiveIndex : 0);\n  }\n\n  setActive(index: number) {\n    if (this.activeIndex !== index) {\n      if (typeof this.activeIndex === 'number') {\n        this.btnList[this.activeIndex].el.classList.remove('active');\n      }\n      this.activeIndex = index;\n      this.btnList[index].el.classList.add('active');\n      this.setActiveIndicator();\n    }\n  }\n\n  setActiveIndicator() {\n    const containerRect = this.btnContainerEl.getBoundingClientRect();\n    const rect = this.btnList[this.activeIndex].el.getBoundingClientRect();\n    setStyles(this.indicatorEl, {\n      width: rect.width + 'px',\n      // this.activeIndex === 0 || this.activeIndex === this.btnList.length - 1\n      //   ? rect.width - 2 + 'px'\n      //   : rect.width + 4 + 'px',\n      left: rect.left - containerRect.left + 4 + 'px',\n      // this.activeIndex === 0\n      //   ? rect.left - containerRect.left + 4 + 'px'\n      //   : rect.left - containerRect.left - 2 + 'px',\n    });\n    // this.indicatorEl.style.width = rect.width + 2 + 'px';\n  }\n\n  setDisabled() {\n    this.disabled = true;\n    this.element.classList.add('disabled');\n  }\n\n  setEnabled() {\n    this.disabled = false;\n    this.element.classList.remove('disabled');\n  }\n}\n","import { createClassElement, removeElement } from '../../../lib/dom';\nimport { DialogOptions } from '../../../types';\nimport { Icon } from '../icon/Icon';\n\n/**\n * table-flow-graph dialog\n */\nexport default class Dialog {\n  targetElement: HTMLElement;\n  public element: HTMLElement;\n  public maskElement: HTMLElement;\n  public boxElement: HTMLElement;\n  public titleBarElement: HTMLElement;\n  public closeBtnElement: HTMLElement;\n  public title: string;\n\n  constructor(options: DialogOptions) {\n    this.title = options.title;\n    this.targetElement = options.targetElement\n      ? options.targetElement\n      : document.getElementsByTagName('body')[0];\n    this.element = createClassElement('div', 'tfgraph-dialog', this.targetElement);\n    this.maskElement = createClassElement('div', 'tfgraph-dialog-mask', this.element);\n    this.boxElement = createClassElement('div', 'tfgraph-dialog-box', this.element);\n    this.renderTitleBar();\n    this.boxElement.appendChild(options.contentElement);\n    this.targetElement.classList.add('overflow-hidden');\n    this.maskElement.addEventListener('click', () => this.close());\n  }\n\n  renderTitleBar() {\n    this.titleBarElement = createClassElement('div', 'tfgraph-dialog-bar', this.boxElement);\n    const titleEl = createClassElement('div', 'tfgraph-dialog-bar-title', this.titleBarElement);\n    titleEl.innerText = this.title;\n    this.closeBtnElement = createClassElement(\n      'div',\n      'tfgraph-dialog-bar-btn',\n      this.titleBarElement,\n    );\n    new Icon(this.closeBtnElement, { name: 'x2', size: 18 });\n    this.closeBtnElement.addEventListener('click', () => this.close());\n  }\n\n  public close() {\n    this.closeBtnElement.removeEventListener('click', () => this.close());\n    this.maskElement.removeEventListener('click', () => this.close());\n    removeElement(this.element);\n    this.targetElement.classList.remove('overflow-hidden');\n  }\n}\n","import { TableFlowGraph } from '../..';\nimport { createClassElement } from '../../lib/dom';\nimport { TFGraphColumn } from '../../types';\nimport Button from '../ui/button/Button';\nimport Dialog from '../ui/dialog/Dialog';\nimport TableHeaderCell from './TableHeaderCell';\n\nexport default class EditColumnDialog {\n  public dialog: Dialog | null;\n  public targetHeaderCell: TableHeaderCell;\n  public title: string;\n  public graphInstance: TableFlowGraph;\n  public contentElement: HTMLElement;\n  public inputEl: HTMLInputElement;\n  public btnConfirm: Button;\n  public btnCancel: Button;\n  public isEdit: boolean;\n\n  constructor(graphInstance: TableFlowGraph, targetHeaderCell?: TableHeaderCell) {\n    this.graphInstance = graphInstance;\n    this.dialog = null;\n    this.targetHeaderCell = targetHeaderCell;\n    this.setIsEdit();\n    this.renderContent();\n  }\n\n  setIsEdit() {\n    if (this.targetHeaderCell) {\n      this.title = this.targetHeaderCell.columnData.title;\n      this.isEdit = true;\n    } else {\n      this.title = '';\n      this.isEdit = false;\n    }\n    if (this.inputEl) this.inputEl.value = this.title;\n  }\n\n  renderContent() {\n    this.contentElement = createClassElement('div', 'flex flex-col w-420 px-15 pb-15');\n    this.inputEl = createClassElement('input', 'tfgraph-input', this.contentElement);\n    this.inputEl.setAttribute('placeholder', this.graphInstance.options.labels.enterColumnName);\n    const btnContainer = createClassElement(\n      'div',\n      'flex flex-row items-center justify-end mt-15',\n      this.contentElement,\n    );\n    this.btnCancel = new Button(btnContainer, {\n      label: this.graphInstance.options.labels.cancel,\n      type: 'default',\n      className: 'mr-10',\n      onClick: () => {\n        this.dialog.close();\n      },\n    });\n    this.btnConfirm = new Button(btnContainer, {\n      label: this.graphInstance.options.labels.confirm,\n      type: 'primary',\n      onClick: () => {\n        if (this.inputEl.value) {\n          if (this.title !== this.inputEl.value) {\n            if (this.isEdit) {\n              this.targetHeaderCell.columnData.title = this.inputEl.value;\n              this.dialog.close();\n              this.graphInstance.refresh();\n              if (typeof this.graphInstance.options.onEditColumn === 'function') {\n                this.graphInstance.options.onEditColumn(this.targetHeaderCell.columnData);\n              }\n            } else {\n              const colData: TFGraphColumn = {\n                id: `header_col_${this.graphInstance.options.totalColumns}`,\n                title: this.inputEl.value,\n              };\n              this.graphInstance.options.columns.push(colData);\n              this.dialog.close();\n              this.graphInstance.refresh();\n              if (typeof this.graphInstance.options.onAddColumn === 'function') {\n                this.graphInstance.options.onAddColumn(colData);\n              }\n            }\n          } else {\n            this.dialog.close();\n          }\n        }\n      },\n    });\n  }\n\n  public show() {\n    this.setIsEdit();\n    this.dialog = new Dialog({\n      title: this.isEdit\n        ? this.graphInstance.options.labels.editColumn\n        : this.graphInstance.options.labels.addColumn,\n      contentElement: this.contentElement,\n    });\n  }\n}\n","import { TableFlowGraph } from '../..';\nimport { HintType } from '../../types';\n\nexport default class HintManager {\n  public targetEl: HTMLElement;\n  public currentHintState: HintType;\n  public graphInstance: TableFlowGraph;\n\n  constructor(targetEl: HTMLElement, graphInstance: TableFlowGraph) {\n    this.targetEl = targetEl;\n    this.graphInstance = graphInstance;\n    this.currentHintState = 'idel';\n    this.targetEl.innerText = '';\n  }\n\n  setHint(hintState: HintType) {\n    this.currentHintState = hintState;\n    switch (this.currentHintState) {\n      case 'idel':\n        this.targetEl.innerText = '';\n        break;\n      case 'drawLine':\n        this.targetEl.innerText = this.graphInstance.options.labels.hint_drawLine;\n        break;\n      case 'hoverLine':\n        this.targetEl.innerText = this.graphInstance.options.labels.hint_hoverLine;\n        break;\n      case 'hoverAnchor':\n        this.targetEl.innerText = this.graphInstance.options.labels.hint_hoverAnchor;\n        break;\n      case 'moveNode':\n        this.targetEl.innerText = this.graphInstance.options.labels.hint_moveNode;\n        break;\n      case 'resizeNode':\n        this.targetEl.innerText = this.graphInstance.options.labels.hint_resizeNode;\n        break;\n      default:\n        this.targetEl.innerText = '';\n        break;\n    }\n  }\n}\n","import { TableFlowGraph } from '../../index';\nimport { createClassElement } from '../../lib/dom';\nimport Button from '../ui/button/Button';\nimport Toggler from '../ui/toggler/Toggler';\nimport { Mode } from '../../types';\nimport EditColumnDialog from '../table/EditColumnDialog';\nimport HintManager from './HintManager';\n// import { Icon } from './ui/Icon';\n\n/**\n * table-flow-graph toolbar\n */\nexport default class Toolbar {\n  public element: HTMLElement;\n  public graphInstance: TableFlowGraph;\n  public disabledMask: HTMLElement;\n  public modeToggler: Toggler;\n  public hintEl: HTMLElement;\n  public hintMgr: HintManager;\n  public newColumnBtn: Button;\n  public addColDialog: EditColumnDialog;\n\n  constructor(parentElement: HTMLElement, graphInstance: TableFlowGraph) {\n    this.graphInstance = graphInstance;\n    this.element = createClassElement('div', 'tfgraph-toolbar', parentElement);\n    this.modeToggler = new Toggler(this.element, {\n      items: [\n        { label: this.graphInstance.options.labels.editMode, id: 'edit' },\n        { label: this.graphInstance.options.labels.previewMode, id: 'preview' },\n      ],\n      onChange: (item) => {\n        graphInstance.changeMode(item.id as Mode);\n        this.setToolbarState();\n      },\n    });\n    this.hintEl = createClassElement('div', 'tfgraph-toolbar-hint', this.element);\n    this.hintMgr = new HintManager(this.hintEl, this.graphInstance);\n    // new Icon(this.element, {\n    //   name: 'plus',\n    //   style: { width: '16px', height: '16px' },\n    // });\n    const rightBtns = createClassElement('div', 'flex-row items-center', this.element);\n    this.newColumnBtn = new Button(rightBtns, {\n      icon: 'plus',\n      label: this.graphInstance.options.labels.addColumn,\n      type: 'primary',\n      onClick: () => this.addColumn(),\n    });\n\n    this.disabledMask = createClassElement('div', 'tfgraph-toolbar-mask hidden', this.element);\n    // new Button(rightBtns, { label: '添加行', type: 'primary' });\n\n    // new Button(this.element, { label: 'default' });\n    // new Button(this.element, {\n    //   label: 'clean',\n    //   type: 'clean',\n    //   onClick: () => {\n    //     console.log('clean clicked');\n    //   },\n    // });\n    // new Button(this.element, { label: 'primary', type: 'primary' });\n    // new Button(this.element, { label: 'warning', type: 'warning' });\n    // new Button(this.element, { label: 'danger', type: 'danger' });\n    // new Button(this.element, { label: 'success', type: 'success' });\n    // testBtn.setDisabled();\n    this.setToolbarState();\n    this.addColDialog = new EditColumnDialog(this.graphInstance);\n  }\n\n  addColumn() {\n    if (typeof this.graphInstance.options.addColumn === 'function') {\n      this.graphInstance.options.addColumn();\n    } else {\n      if (this.graphInstance.hasTableHeader) {\n        // add column dialog\n        this.addColDialog.show();\n      } else {\n        this.graphInstance.refresh(\n          Object.assign({}, this.graphInstance.options, {\n            columns: null,\n            totalColumns: this.graphInstance.options.totalColumns + 1,\n          }),\n        );\n        if (typeof this.graphInstance.options.onAddColumn === 'function') {\n          this.graphInstance.options.onAddColumn();\n        }\n      }\n    }\n  }\n\n  disable() {\n    this.disabledMask.classList.remove('hidden');\n  }\n\n  enable() {\n    this.disabledMask.classList.add('hidden');\n  }\n\n  setToolbarState() {\n    if (\n      this.graphInstance.options.totalColumns >= this.graphInstance.options.maxColumns ||\n      this.graphInstance.mode === 'preview'\n    ) {\n      this.newColumnBtn.element.classList.add('hidden');\n    } else {\n      this.newColumnBtn.element.classList.remove('hidden');\n    }\n  }\n}\n","import { createClassElement, removeElement, setStyles } from '../../../lib/dom';\nimport { PopupOptions } from '../../../types';\n\n/**\n * table-flow-graph popup\n */\nexport default class Popup {\n  targetElement: HTMLElement;\n  options: PopupOptions;\n  public element: HTMLElement;\n  public areaElement: HTMLElement;\n  public boxElement: HTMLElement;\n  public arrowElement: HTMLElement;\n  public disabled: boolean;\n  public rendered: boolean;\n  public timeoutId: number | null;\n\n  constructor(targetElement: HTMLElement, options: PopupOptions) {\n    this.targetElement = targetElement;\n    this.options = options;\n    this.rendered = false;\n    this.targetElement.addEventListener('mouseenter', () => this.mouseEnter());\n    this.targetElement.addEventListener('mouseleave', () => this.mouseLeave());\n  }\n\n  public render() {\n    const { placement = 'top', contentElement } = this.options;\n\n    const targetRect = this.targetElement.getBoundingClientRect();\n    this.element = createClassElement('div', 'tfgraph-popup', document.body);\n    setStyles(this.element, {\n      left: targetRect.left + 0.5 * targetRect.width + 'px',\n      top: targetRect.top + 0.5 * targetRect.height + 'px',\n    });\n\n    this.areaElement = createClassElement('div', `tfgraph-popup-area ${placement}`, this.element);\n    this.boxElement = createClassElement('div', 'tfgraph-popup-box', this.areaElement);\n    this.arrowElement = createClassElement('div', 'tfgraph-popup-arrow', this.areaElement);\n    if (contentElement) this.boxElement.appendChild(contentElement);\n\n    const areaRect = this.areaElement.getBoundingClientRect();\n    const arrowRect = this.arrowElement.getBoundingClientRect();\n    const areaStyleObj: Partial<CSSStyleDeclaration> = {};\n    const arrowStyleObj: Partial<CSSStyleDeclaration> = {};\n    switch (placement) {\n      case 'top':\n        areaStyleObj.left = -0.5 * areaRect.width + 'px';\n        areaStyleObj.bottom = 0.5 * targetRect.height + 'px';\n        arrowStyleObj.left = 0.5 * (areaRect.width - arrowRect.width) + 'px';\n        break;\n      case 'right':\n        areaStyleObj.left = 0.5 * targetRect.width + 'px';\n        areaStyleObj.top = -0.5 * areaRect.height + 'px';\n        arrowStyleObj.top = 0.5 * (areaRect.height - arrowRect.height) + 'px';\n        break;\n      case 'bottom':\n        areaStyleObj.left = -0.5 * areaRect.width + 'px';\n        areaStyleObj.top = 0.5 * targetRect.height + 'px';\n        arrowStyleObj.left = 0.5 * (areaRect.width - arrowRect.width) + 'px';\n        break;\n      case 'left':\n        areaStyleObj.right = 0.5 * targetRect.width + 'px';\n        areaStyleObj.top = -0.5 * areaRect.height + 'px';\n        arrowStyleObj.top = 0.5 * (areaRect.height - arrowRect.height) + 'px';\n        break;\n      default:\n        break;\n    }\n    setStyles(this.areaElement, areaStyleObj);\n    setStyles(this.arrowElement, arrowStyleObj);\n\n    this.areaElement.addEventListener('mouseenter', () => this.mouseEnter());\n    this.areaElement.addEventListener('mouseleave', () => this.mouseLeave());\n    this.rendered = true;\n  }\n\n  public dismiss() {\n    this.rendered = false;\n    this.areaElement.removeEventListener('mouseenter', () => this.mouseEnter());\n    this.areaElement.removeEventListener('mouseleave', () => this.mouseLeave());\n    removeElement(this.element);\n  }\n\n  public mouseEnter() {\n    if (!this.rendered) this.render();\n    if (this.timeoutId) {\n      window.clearTimeout(this.timeoutId);\n    }\n  }\n\n  public mouseLeave() {\n    this.timeoutId = window.setTimeout(() => {\n      this.dismiss();\n    }, 200);\n  }\n}\n","import { TableFlowGraph } from '../..';\nimport { createClassElement } from '../../lib/dom';\nimport { TFGraphNode } from '../../types';\nimport Button from '../ui/button/Button';\nimport Dialog from '../ui/dialog/Dialog';\nimport TableCell from './TableCell';\n\nexport default class EditNodeDialog {\n  public dialog: Dialog | null;\n  public targetCell: TableCell;\n  public title: string;\n  public graphInstance: TableFlowGraph;\n  public contentElement: HTMLElement;\n  public nodeNameInput: HTMLInputElement;\n  public btnConfirm: Button;\n  public btnCancel: Button;\n  public isEdit: boolean;\n\n  constructor(graphInstance: TableFlowGraph, targetCell: TableCell) {\n    this.graphInstance = graphInstance;\n    this.targetCell = targetCell;\n    this.dialog = null;\n    if (targetCell.nodeData) {\n      this.title = targetCell.nodeData.title;\n      this.isEdit = true;\n    } else {\n      this.title = '';\n      this.isEdit = false;\n    }\n    this.renderContent();\n  }\n\n  setIsEdit() {\n    if (this.targetCell.nodeData) {\n      this.title = this.targetCell.nodeData.title;\n      this.isEdit = true;\n    } else {\n      this.title = '';\n      this.isEdit = false;\n    }\n    if (this.nodeNameInput) this.nodeNameInput.value = this.title;\n  }\n\n  renderContent() {\n    this.contentElement = createClassElement('div', 'flex flex-col w-420 px-15 pb-15');\n    this.nodeNameInput = createClassElement('input', 'tfgraph-input', this.contentElement);\n    this.nodeNameInput.setAttribute('placeholder', this.graphInstance.options.labels.enterNodeName);\n    const btnContainer = createClassElement(\n      'div',\n      'flex flex-row items-center justify-end mt-15',\n      this.contentElement,\n    );\n    this.btnCancel = new Button(btnContainer, {\n      label: this.graphInstance.options.labels.cancel,\n      type: 'default',\n      className: 'mr-10',\n      onClick: () => {\n        this.dialog.close();\n      },\n    });\n    this.btnConfirm = new Button(btnContainer, {\n      label: this.graphInstance.options.labels.confirm,\n      type: 'primary',\n      onClick: () => {\n        if (this.nodeNameInput.value) {\n          if (this.title !== this.nodeNameInput.value) {\n            if (this.isEdit) {\n              this.targetCell.nodeData.title = this.nodeNameInput.value;\n              this.dialog.close();\n              this.graphInstance.refresh();\n              if (typeof this.graphInstance.options.onEditNode === 'function') {\n                this.graphInstance.options.onEditNode(this.targetCell.nodeData);\n              }\n            } else {\n              const nodeData: TFGraphNode = {\n                id: `node_${this.targetCell.row}_${this.targetCell.column}`,\n                row: this.targetCell.row,\n                column: this.targetCell.column,\n                rowSpan: 1,\n                colSpan: 1,\n                title: this.nodeNameInput.value,\n              };\n              this.graphInstance.options.nodes.push(nodeData);\n              this.dialog.close();\n              this.graphInstance.refresh();\n              if (typeof this.graphInstance.options.onAddNode === 'function') {\n                this.graphInstance.options.onAddNode(nodeData);\n              }\n            }\n          } else {\n            this.dialog.close();\n          }\n        }\n      },\n    });\n  }\n\n  public show() {\n    this.setIsEdit();\n    this.dialog = new Dialog({\n      title: this.isEdit\n        ? this.graphInstance.options.labels.editNode\n        : this.graphInstance.options.labels.addNode,\n      contentElement: this.contentElement,\n    });\n  }\n}\n","import { TableFlowGraph } from '../../index';\nimport { createClassElement } from '../../lib/dom';\nimport { TFGraphNode } from '../../types';\nimport Button from '../ui/button/Button';\nimport Popup from '../ui/popup/Popup';\nimport EditNodeDialog from './EditNodeDialog';\nimport { remove } from 'lodash-es';\n// import Dialog from '../ui/dialog/Dialog';\n\n/**\n * table-flow-graph tabel cell\n */\nexport default class TableCell {\n  public graphInstance: TableFlowGraph;\n  public element: HTMLElement;\n  public nodeEl: HTMLElement;\n  public controlLayer: HTMLElement;\n  public popup: Popup;\n  public nodeData?: TFGraphNode;\n  public hasNode: boolean;\n  public row: number;\n  public column: number;\n  public rowSpan: number;\n  public colSpan: number;\n  public isTarget: boolean; // is moving or resizing this cell\n  public deleteRowBtn: Button;\n  public deleteColBtn: Button;\n  public editDialog: EditNodeDialog | null;\n\n  constructor(\n    parentElement: HTMLElement,\n    data: TFGraphNode | null,\n    row: number,\n    column: number,\n    graphInstance: TableFlowGraph,\n  ) {\n    this.graphInstance = graphInstance;\n    this.row = row;\n    this.column = column;\n    this.element = this.createTabelCell(data, row, column, this.graphInstance);\n    parentElement.appendChild(this.element);\n  }\n\n  createTabelCell(\n    data: TFGraphNode | null,\n    row,\n    column,\n    graphInstance: TableFlowGraph,\n  ): HTMLElement {\n    const el = createClassElement('div', 'tfgraph-cell');\n    el.setAttribute('id', `${graphInstance.id}_cell_${row}_${column}`);\n    if (data) {\n      const node = createClassElement('div', 'tfgraph-node');\n      node.classList.add(data.type ? data.type : 'default');\n      if (data.isBtn && this.graphInstance.mode !== 'edit') node.classList.add('isBtn');\n      if (typeof this.graphInstance.options.renderNode === 'function') {\n        node.appendChild(this.graphInstance.options.renderNode(data));\n      } else {\n        node.innerText = data.title;\n      }\n\n      // node.innerText = data.id;\n      el.appendChild(node);\n      this.hasNode = true;\n      this.nodeEl = node;\n      this.nodeData = data;\n      this.rowSpan = data.rowSpan;\n      this.colSpan = data.colSpan;\n    } else {\n      this.rowSpan = 1;\n      this.colSpan = 1;\n      this.hasNode = false;\n    }\n    // set min height base on row span\n    el.style.minHeight = 80 * this.rowSpan + 'px';\n    return el;\n  }\n\n  // cell controls for edit mode\n  setEditControls() {\n    this.controlLayer = createClassElement(\n      'div',\n      'tfgraph-cell-control-layer hidden',\n      this.element,\n    );\n    // const controlRowEl = createClassElement(\n    //   'div',\n    //   'flex flex-row items-center justify-center p-15 flex-wrap',\n    //   this.controlLayer,\n    // );\n    this.editDialog = new EditNodeDialog(this.graphInstance, this);\n    if (this.nodeData) {\n      new Button(this.controlLayer, {\n        icon: 'move',\n        type: 'primary',\n        tooltip: this.graphInstance.options.labels.moveNode,\n        className: 'absolute left-6 top-6 p-0 sm w-28 btn-tl',\n        onClick: () => {\n          this.graphInstance.tableController.startMoving(this);\n        },\n      });\n      new Button(this.controlLayer, {\n        icon: 'edit',\n        type: 'primary',\n        tooltip: this.graphInstance.options.labels.editNode,\n        className: 'absolute left-6 bottom-6 p-0 sm w-28 btn-bl',\n        onClick: () => {\n          if (typeof this.graphInstance.options.editNode === 'function') {\n            this.graphInstance.options.editNode(this.nodeData);\n          } else {\n            this.editDialog.show();\n          }\n        },\n      });\n      new Button(this.controlLayer, {\n        icon: 'remove',\n        type: 'danger',\n        tooltip: this.graphInstance.options.labels.deleteNode,\n        className: 'absolute right-6 top-6 p-0 sm w-28 btn-tr',\n        onClick: () => {\n          if (typeof this.graphInstance.options.deleteNode === 'function') {\n            this.graphInstance.options.deleteNode(this.nodeData);\n          } else {\n            // TODO remove cell\n            remove(this.graphInstance.options.nodes, (item) => {\n              return this.nodeData.id === item.id;\n            });\n            this.graphInstance.refresh();\n            if (typeof this.graphInstance.options.onDeleteNode === 'function') {\n              this.graphInstance.options.onDeleteNode(this.nodeData);\n            }\n          }\n        },\n      });\n      new Button(this.controlLayer, {\n        icon: 'expand',\n        type: 'primary',\n        tooltip: this.graphInstance.options.labels.adjustNodeSize,\n        className: 'absolute right-6 bottom-6 p-0 sm w-28 btn-br',\n        onClick: () => {\n          this.graphInstance.tableController.startResizing(this);\n        },\n      });\n    } else {\n      new Button(this.controlLayer, {\n        icon: 'plus',\n        type: 'primary',\n        className: 'absolute left-6 top-6 p-0 sm w-28 btn-tl',\n        tooltip: this.graphInstance.options.labels.addNode,\n        onClick: () => {\n          if (typeof this.graphInstance.options.addNode === 'function') {\n            this.graphInstance.options.addNode(this.row, this.column);\n          } else {\n            this.editDialog.show();\n          }\n        },\n      });\n      if (\n        this.graphInstance.options.totalRows > 1 &&\n        this.row === this.graphInstance.options.totalRows - 1\n      ) {\n        this.deleteRowBtn = new Button(this.controlLayer, {\n          icon: 'delete_row',\n          type: 'danger',\n          className: 'absolute right-6 top-6 p-0 sm w-28 btn-tr',\n          tooltip: this.graphInstance.options.labels.deleteRow,\n          onClick: () => {\n            if (typeof this.graphInstance.options.deleteRow === 'function') {\n              this.graphInstance.options.deleteRow();\n            } else {\n              this.graphInstance.refresh(\n                Object.assign({}, this.graphInstance.options, {\n                  totalRows: this.graphInstance.options.totalRows - 1,\n                }),\n              );\n              if (typeof this.graphInstance.options.onDeleteRow === 'function') {\n                this.graphInstance.options.onDeleteRow();\n              }\n            }\n          },\n        });\n      }\n      if (\n        this.graphInstance.options.totalColumns > 1 &&\n        this.column === this.graphInstance.options.totalColumns - 1\n      ) {\n        this.deleteColBtn = new Button(this.controlLayer, {\n          icon: 'delete_col',\n          type: 'danger',\n          className: 'absolute right-6 bottom-6 p-0 sm w-28 btn-br',\n          tooltip: this.graphInstance.options.labels.deleteColumn,\n          onClick: () => {\n            if (typeof this.graphInstance.options.deleteColumn === 'function') {\n              // custom delete column method\n              const targetColumn =\n                this.graphInstance.options.columns[this.graphInstance.options.totalColumns - 1];\n              this.graphInstance.options.deleteColumn(targetColumn);\n            } else {\n              // auto delete column\n              if (this.graphInstance.hasTableHeader) {\n                // if has options.columns data (table header will be rendered)\n                if (typeof this.graphInstance.options.onDeleteColumn === 'function') {\n                  const targetColumn =\n                    this.graphInstance.options.columns[this.graphInstance.options.totalColumns - 1];\n                  this.graphInstance.options.onDeleteColumn(targetColumn);\n                }\n                this.graphInstance.options.columns.pop();\n                this.graphInstance.refresh(Object.assign({}, this.graphInstance.options));\n              } else {\n                // if options.columns data is null or empty\n                this.graphInstance.refresh(\n                  Object.assign({}, this.graphInstance.options, {\n                    columns: null,\n                    totalColumns: this.graphInstance.options.totalColumns - 1,\n                  }),\n                );\n                if (typeof this.graphInstance.options.onDeleteColumn === 'function') {\n                  this.graphInstance.options.onDeleteColumn();\n                }\n              }\n            }\n          },\n        });\n      }\n    }\n    this.element.addEventListener('mouseenter', () => this.onMouseEnter());\n    this.element.addEventListener('mouseleave', () => this.onMouseLeave());\n  }\n\n  public setViewModeControls() {\n    if (this.nodeData) {\n      this.element.addEventListener('click', () => this.onClickNode());\n      if (this.nodeData.showPopup) {\n        let contentEl: HTMLElement;\n        if (typeof this.graphInstance.options.renderNodeHoverPopup === 'function') {\n          contentEl = this.graphInstance.options.renderNodeHoverPopup(this.nodeData);\n        } else {\n          contentEl = createClassElement('div', 'flex flex-col items-center p-30');\n          contentEl.innerHTML = this.nodeData.title;\n        }\n\n        this.popup = new Popup(this.nodeEl, {\n          placement: 'top',\n          contentElement: contentEl,\n        });\n      }\n    }\n  }\n\n  onMouseEnter() {\n    this.controlLayer.classList.remove('hidden');\n    if (this.deleteRowBtn) {\n      if (\n        this.graphInstance.tableController.canDeleteRow &&\n        this.graphInstance.lineController.canDeleteRow\n      ) {\n        this.deleteRowBtn.element.classList.remove('hidden');\n      } else {\n        this.deleteRowBtn.element.classList.add('hidden');\n      }\n    }\n    if (this.deleteColBtn) {\n      if (\n        this.graphInstance.tableController.canDeleteColumn &&\n        this.graphInstance.lineController.canDeleteColumn\n      ) {\n        this.deleteColBtn.element.classList.remove('hidden');\n      } else {\n        this.deleteColBtn.element.classList.add('hidden');\n      }\n    }\n  }\n\n  onMouseLeave() {\n    this.controlLayer.classList.add('hidden');\n  }\n\n  onClickNode() {\n    if (typeof this.graphInstance.options.onClickNode === 'function') {\n      this.graphInstance.options.onClickNode(this.nodeData, this.nodeEl);\n    }\n  }\n\n  public setIsTarget(isTarget: boolean) {\n    if (isTarget && !this.isTarget) {\n      this.isTarget = true;\n      this.element.style.opacity = '0.4';\n    } else if (!isTarget && this.isTarget) {\n      this.isTarget = false;\n      this.element.style.opacity = '1';\n    }\n  }\n}\n","import { TableFlowGraph } from '../../index';\nimport { createClassElement } from '../../lib/dom';\nimport { TFGraphColumn } from '../../types';\nimport Button from '../ui/button/Button';\nimport Popup from '../ui/popup/Popup';\n// import TableHeaderCellMenu from './TableHeaderCellMenu';\nimport EditColumnDialog from './EditColumnDialog';\n\n/**\n * table-flow-graph tabel header cell\n */\nexport default class TableHeaderCell {\n  public graphInstance: TableFlowGraph;\n  public element: HTMLElement;\n  public columnIndex: number;\n  public isLast: boolean;\n  public columnData: TFGraphColumn;\n  public canDelete: boolean;\n  public canAdd: boolean;\n  public popMenu: Popup | null;\n  // public menu: TableHeaderCellMenu | null;\n  public controlLayer: HTMLElement;\n  public editColDialog: EditColumnDialog;\n\n  constructor(\n    parentElement: HTMLElement,\n    columnData: TFGraphColumn,\n    columnIndex: number,\n    graphInstance: TableFlowGraph,\n  ) {\n    this.graphInstance = graphInstance;\n    this.columnIndex = columnIndex;\n    this.columnData = columnData;\n    this.isLast = this.columnIndex === this.graphInstance.options.totalColumns - 1;\n    this.element = this.createElement(parentElement);\n  }\n\n  createElement(parentElement: HTMLElement): HTMLElement {\n    const el = createClassElement('th', 'tfgraph-th', parentElement);\n    if (this.columnData.title) {\n      el.innerHTML = this.columnData.title;\n    } else {\n      el.classList.add('empty');\n    }\n    if (this.columnData.width) {\n      // TODO load width value from options\n      let width = this.columnData.width;\n      switch (this.columnData.width) {\n        case 'large':\n          width = '200';\n          break;\n        case 'md':\n          width = '170';\n          break;\n        case 'sm':\n          width = '130';\n          break;\n        case 'xs':\n          width = '105';\n          break;\n        default:\n          width = this.columnData.width;\n          break;\n      }\n      el.setAttribute('width', width);\n    } else {\n      el.setAttribute('width', 'auto');\n    }\n    el.setAttribute('id', `${this.graphInstance.id}_col_${this.columnIndex}`);\n    return el;\n  }\n\n  // header cell controls for edit mode\n  public setEditControls() {\n    this.controlLayer = createClassElement(\n      'div',\n      'tfgraph-cell-control-layer hidden',\n      this.element,\n    );\n    this.editColDialog = new EditColumnDialog(this.graphInstance, this);\n    new Button(this.controlLayer, {\n      icon: 'edit',\n      type: 'primary',\n      className: 'absolute left-6 top-6 p-0 sm w-28 btn-tl',\n      tooltip: this.graphInstance.options.labels.editColumn,\n      onClick: () => {\n        if (typeof this.graphInstance.options.editColumn === 'function') {\n          this.graphInstance.options.editColumn(this.columnData);\n        } else {\n          this.editColDialog.show();\n        }\n      },\n    });\n    if (this.isLast && this.graphInstance.tableController.canDeleteColumn) {\n      new Button(this.controlLayer, {\n        icon: 'delete_col',\n        type: 'danger',\n        className: 'absolute right-6 top-6 p-0 sm w-28 btn-tr',\n        tooltip: this.graphInstance.options.labels.deleteColumn,\n        onClick: () => {\n          if (typeof this.graphInstance.options.deleteColumn === 'function') {\n            // custom delete column method\n            this.graphInstance.options.deleteColumn(this.columnData);\n          } else {\n            if (typeof this.graphInstance.options.onDeleteColumn === 'function') {\n              // const targetColumn = this.graphInstance.options.columns[this.graphInstance.options.totalColumns - 1];\n              this.graphInstance.options.onDeleteColumn(this.columnData);\n            }\n            this.graphInstance.options.columns.pop();\n            this.graphInstance.refresh(Object.assign({}, this.graphInstance.options));\n          }\n        },\n      });\n    }\n    this.element.addEventListener('mouseenter', () => this.onMouseEnter());\n    this.element.addEventListener('mouseleave', () => this.onMouseLeave());\n  }\n\n  onMouseEnter() {\n    this.controlLayer.classList.remove('hidden');\n  }\n\n  onMouseLeave() {\n    this.controlLayer.classList.add('hidden');\n  }\n}\n","import { TableFlowGraph } from '../../index';\nimport { createClassElement, setStyles } from '../../lib/dom';\nimport { PositionAndSize } from '../../types';\nimport TableCell from './TableCell';\n\n/**\n * table-flow-graph anchor controller\n */\nexport default class TableMaskBox {\n  graphInstance: TableFlowGraph;\n  public element: HTMLElement;\n  public disabled: boolean;\n\n  constructor(parentEl: HTMLElement, targetCell: TableCell, graphInstance: TableFlowGraph) {\n    this.graphInstance = graphInstance;\n    this.disabled = false;\n    this.element = createClassElement('div', 'tfgraph-table-mask-cell', parentEl);\n    const nodeEl = createClassElement('div', 'tfgraph-table-mask-node', this.element);\n    nodeEl.innerText = targetCell.nodeData.title;\n    // setStyles(this.element, {\n    //   top: top + 'px',\n    //   left: left + 'px',\n    //   width: width + 'px',\n    //   height: height + 'px',\n    // });\n    this.element.addEventListener('click', () => {\n      if (!this.disabled) this.graphInstance.tableController.submitCellChange();\n    });\n  }\n\n  setPositinAndSize(pos_size: PositionAndSize) {\n    setStyles(this.element, {\n      top: pos_size.top + 'px',\n      left: pos_size.left + 'px',\n      width: pos_size.width + 'px',\n      height: pos_size.height + 'px',\n    });\n  }\n\n  disable() {\n    // TODO\n    if (!this.disabled) {\n      this.disabled = true;\n      this.element.classList.add('disabled');\n    }\n  }\n\n  enable() {\n    // TODO\n    if (this.disabled) {\n      this.disabled = false;\n      this.element.classList.remove('disabled');\n    }\n  }\n}\n","import { TableFlowGraph } from '../../index';\nimport { createClassElement, removeElement } from '../../lib/dom';\nimport { CellPositionAndSize, TableGridRect } from '../../types';\nimport TableCell from './TableCell';\nimport TableMaskBox from './TableMaskBox';\nimport { isEqual, cloneDeep } from 'lodash-es';\n\n/**\n * table-flow-graph anchor controller\n */\nexport default class TableMask {\n  graphInstance: TableFlowGraph;\n  public maskBox: TableMaskBox;\n  public element: HTMLElement;\n  public tableGridRectList: TableGridRect[];\n  public mouseGridRect: TableGridRect;\n  public targetCell: TableCell;\n  public targetCellRect: TableGridRect;\n  public resultCellPositionAndSize: CellPositionAndSize;\n  public filteredOccupiedList: number[][]; // 1: occupied, 0: not occupied\n\n  constructor(tableGridRectList: TableGridRect[], graphInstance: TableFlowGraph) {\n    this.graphInstance = graphInstance;\n    this.element = createClassElement(\n      'div',\n      'tfgraph-cell-mask-layer hidden',\n      graphInstance.element,\n    );\n    this.tableGridRectList = tableGridRectList;\n  }\n\n  private showMask(targetTableCell: TableCell) {\n    this.targetCell = targetTableCell;\n    this.targetCell.setIsTarget(true);\n    this.setFilteredOccupiedList();\n    this.maskBox = new TableMaskBox(this.element, this.targetCell, this.graphInstance);\n    this.mouseGridRect = this.getMouseRect();\n    this.targetCellRect = this.getRectByRowAndColumn(this.targetCell.row, this.targetCell.column);\n    this.setMaskBoxStatus();\n  }\n\n  // occupied list without target tabel cell\n  private setFilteredOccupiedList() {\n    this.filteredOccupiedList = cloneDeep(this.graphInstance.tableController.occupiedList);\n    for (let i = this.targetCell.row; i < this.targetCell.row + this.targetCell.rowSpan; i++) {\n      for (\n        let j = this.targetCell.column;\n        j < this.targetCell.column + this.targetCell.colSpan;\n        j++\n      ) {\n        this.filteredOccupiedList[i][j] = 0;\n      }\n    }\n  }\n\n  // set maskbox position/size/disabled etc.\n  private setMaskBoxStatus() {\n    if (this.graphInstance.tableController.isMovingCell) {\n      this.resultCellPositionAndSize = {\n        row:\n          this.mouseGridRect.rowIndex + this.targetCell.rowSpan >\n          this.graphInstance.options.totalRows\n            ? this.graphInstance.options.totalRows - this.targetCell.rowSpan\n            : this.mouseGridRect.rowIndex,\n        column:\n          this.mouseGridRect.columnIndex + this.targetCell.colSpan >\n          this.graphInstance.options.totalColumns\n            ? this.graphInstance.options.totalColumns - this.targetCell.colSpan\n            : this.mouseGridRect.columnIndex,\n        rowSpan: this.targetCell.rowSpan,\n        colSpan: this.targetCell.colSpan,\n      };\n      this.maskBox.element.classList.add('moving');\n    } else {\n      this.resultCellPositionAndSize = {\n        row: Math.min(this.targetCellRect.rowIndex, this.mouseGridRect.rowIndex),\n        column: Math.min(this.targetCellRect.columnIndex, this.mouseGridRect.columnIndex),\n        rowSpan: Math.abs(this.targetCellRect.rowIndex - this.mouseGridRect.rowIndex) + 1,\n        colSpan: Math.abs(this.targetCellRect.columnIndex - this.mouseGridRect.columnIndex) + 1,\n      };\n      this.maskBox.element.classList.add('resizing');\n    }\n    const topLeftRect = this.getRectByRowAndColumn(\n      this.resultCellPositionAndSize.row,\n      this.resultCellPositionAndSize.column,\n    );\n    const bottomRightRect = this.getRectByRowAndColumn(\n      this.resultCellPositionAndSize.row + this.resultCellPositionAndSize.rowSpan - 1,\n      this.resultCellPositionAndSize.column + this.resultCellPositionAndSize.colSpan - 1,\n    );\n    if (bottomRightRect && topLeftRect) {\n      this.maskBox.setPositinAndSize({\n        left: topLeftRect.left,\n        top: topLeftRect.top,\n        width: bottomRightRect.left - topLeftRect.left + bottomRightRect.width + 1,\n        height: bottomRightRect.top - topLeftRect.top + bottomRightRect.height + 1,\n      });\n    }\n\n    // set maskbox disable/enable\n    let doable = true;\n    for (\n      let i = this.resultCellPositionAndSize.row;\n      i <\n      Math.min(\n        this.resultCellPositionAndSize.row + this.resultCellPositionAndSize.rowSpan,\n        this.graphInstance.options.totalRows,\n      );\n      i++\n    ) {\n      for (\n        let j = this.resultCellPositionAndSize.column;\n        j <\n        Math.min(\n          this.resultCellPositionAndSize.column + this.resultCellPositionAndSize.colSpan,\n          this.graphInstance.options.totalColumns,\n        );\n        j++\n      ) {\n        if (!this.filteredOccupiedList[i] || this.filteredOccupiedList[i][j] > 0) {\n          doable = false;\n        }\n      }\n    }\n    if (doable) {\n      this.maskBox.enable();\n    } else {\n      this.maskBox.disable();\n    }\n  }\n\n  public startMask(targetTableCell: TableCell) {\n    this.element.classList.remove('hidden');\n    this.showMask(targetTableCell);\n  }\n\n  public stopMask() {\n    this.element.classList.add('hidden');\n    removeElement(this.maskBox.element);\n    this.targetCell.setIsTarget(false);\n    this.maskBox = null;\n  }\n\n  public submitChange() {\n    this.stopMask();\n    const targetCellPositionAndSize: CellPositionAndSize = {\n      row: this.targetCell.row,\n      column: this.targetCell.column,\n      rowSpan: this.targetCell.rowSpan,\n      colSpan: this.targetCell.colSpan,\n    };\n    if (!isEqual(this.resultCellPositionAndSize, targetCellPositionAndSize)) {\n      // const oldNode = cloneDeep(this.targetCell.nodeData);\n      this.targetCell.nodeData.row = this.resultCellPositionAndSize.row;\n      this.targetCell.nodeData.column = this.resultCellPositionAndSize.column;\n      this.targetCell.nodeData.rowSpan = this.resultCellPositionAndSize.rowSpan;\n      this.targetCell.nodeData.colSpan = this.resultCellPositionAndSize.colSpan;\n      // 提交变更\n      if (typeof this.graphInstance.options.onEditNode === 'function') {\n        this.graphInstance.options.onEditNode(this.targetCell.nodeData);\n      }\n      this.graphInstance.refresh();\n    }\n  }\n\n  // get tableGridRect of current mouse position at\n  private getMouseRect() {\n    const mouseX = this.graphInstance.mousePosition.x;\n    const mouseY = this.graphInstance.mousePosition.y;\n    let targetGridRect: TableGridRect;\n    this.tableGridRectList.forEach((gridRect) => {\n      if (\n        mouseY > gridRect.top &&\n        mouseY < gridRect.top + gridRect.height &&\n        mouseX > gridRect.left &&\n        mouseX < gridRect.left + gridRect.width\n      ) {\n        targetGridRect = gridRect;\n      }\n    });\n    return targetGridRect;\n  }\n\n  private getRectByRowAndColumn(row, column) {\n    // const targetCellRow = this.targetCell.row;\n    // const targetCellColumn = this.targetCell.column;\n    return this.tableGridRectList.find((gridRect) => {\n      return gridRect.rowIndex === row && gridRect.columnIndex === column;\n    });\n  }\n\n  public onMouseMove() {\n    const newRect = this.getMouseRect();\n    if (!isEqual(newRect, this.mouseGridRect)) {\n      if (newRect) {\n        this.mouseGridRect = newRect;\n        this.setMaskBoxStatus();\n      }\n    }\n  }\n}\n","import { TableFlowGraph } from '../../index';\nimport { createClassElement, removeElement, setStyles } from '../../lib/dom';\nimport TableCell from './TableCell';\nimport TableHeaderCell from './TableHeaderCell';\nimport TableMask from './TableMask';\nimport Button from '../ui/button/Button';\nimport { setColumnAndRowDeletable } from '../../lib/utils';\nimport { ColumnSpec, RowSpec, TableGridRect } from '../../types';\n\n/**\n * table-flow-graph tabel\n */\nexport default class Table {\n  graphInstance: TableFlowGraph;\n  public element: HTMLElement;\n  public bottomControlEL: HTMLElement | null;\n  public cells: TableCell[];\n  public headerCells: TableHeaderCell[];\n  public canDeleteColumn: boolean;\n  public canDeleteRow: boolean;\n  public occupiedList: number[][]; // 1: occupied, 0: not occupied\n  public tableMask: TableMask;\n  public isMovingCell: boolean;\n  public isResizingCell: boolean;\n\n  constructor(graphInstance: TableFlowGraph) {\n    this.graphInstance = graphInstance;\n    this.element = createClassElement('table', 'tfgraph-table', this.graphInstance.element);\n    this.initTableStatus();\n  }\n\n  private initTableStatus() {\n    this.headerCells = [];\n    this.cells = [];\n    this.canDeleteColumn = false;\n    this.canDeleteRow = false;\n    this.occupiedList = [];\n    this.isMovingCell = false;\n    this.isResizingCell = false;\n  }\n\n  // render table and set table controls\n  public renderTable() {\n    this.initTableStatus();\n    this.element.innerHTML = '';\n    this.createHeader();\n    this.createTds();\n    this.createCells();\n    this.setControls();\n  }\n\n  public setControls() {\n    const isEditMode = this.graphInstance.mode === 'edit';\n    if (isEditMode) {\n      const deleteableObj = setColumnAndRowDeletable(\n        this.occupiedList,\n        this.graphInstance.options.totalRows,\n        this.graphInstance.options.totalColumns,\n      );\n      this.canDeleteColumn = deleteableObj.canDeleteColumn;\n      this.canDeleteRow = deleteableObj.canDeleteRow;\n\n      this.cells.forEach((cell) => {\n        // set tabel cell controls\n        cell.setEditControls();\n      });\n\n      // wait for table render ready\n      setTimeout(() => {\n        const columnSpecs: ColumnSpec[] = []; // [{left, width, columnIndex}]\n        const rowSpecs: RowSpec[] = []; // [{ top, height, rowIndex}]\n\n        this.headerCells.forEach((headerCell) => {\n          // set headerCell controls\n          headerCell.setEditControls();\n          // get columns's width and position\n          columnSpecs.push({\n            width: headerCell.element.getBoundingClientRect().width + 1,\n            left: headerCell.element.offsetLeft - 1,\n            columnIndex: headerCell.columnIndex,\n          });\n        });\n\n        // get rowSpects(row top position and height)\n        for (let i = 0; i < this.graphInstance.options.totalRows; i++) {\n          const targetCell = this.getMinRowSpanCell(i, 1);\n          const targetCellHeight = targetCell.element.getBoundingClientRect().height;\n          const targetCellRowHeight = targetCellHeight / targetCell.rowSpan;\n          rowSpecs.push({\n            top: targetCell.element.offsetTop - 1 + (i - targetCell.row) * targetCellRowHeight,\n            height: targetCellRowHeight + 1,\n            rowIndex: i,\n          });\n        }\n        // each table grid's left, top, width, height without rowspan and colspan\n        const tableGridRectList: TableGridRect[] = [];\n        rowSpecs.forEach((rowSpec) => {\n          columnSpecs.forEach((columnSpec) => {\n            tableGridRectList.push(Object.assign({}, rowSpec, columnSpec));\n          });\n        });\n        this.tableMask = new TableMask(tableGridRectList, this.graphInstance);\n      }, 1);\n    } else {\n      // click node event\n      this.cells.forEach((cell) => {\n        // set tabel cell controls\n        cell.setViewModeControls();\n      });\n    }\n    this.setBottomControl();\n\n    // set table cell controls\n    // 1. remove last row ✓\n    // 2. empty cell: add node ✓\n    // 3. node cell: edit node content ✓\n    // 4. node cell: adjust node size ✓\n    // 5. node cell: move node position ✓\n  }\n\n  //  recursively find min rowspan cell for targetRow\n  getMinRowSpanCell(row: number, minRowSpan = 1) {\n    let targetRowCell: TableCell | null = null;\n    const rowCells = this.cells.filter((cell) => cell.row === row);\n    if (rowCells.length === 0) {\n      if (row > 0) {\n        targetRowCell = this.getMinRowSpanCell(row - 1, minRowSpan + 1);\n      }\n    } else {\n      let rowSpan = 20;\n      rowCells.forEach((cell) => {\n        if (cell.rowSpan < rowSpan && cell.rowSpan >= minRowSpan) {\n          rowSpan = cell.rowSpan;\n          targetRowCell = cell;\n        }\n      });\n    }\n    return targetRowCell;\n  }\n\n  public onMouseMove() {\n    if (this.isMovingCell || this.isResizingCell) {\n      this.tableMask.onMouseMove();\n    }\n  }\n\n  public startMoving(targetCell: TableCell) {\n    this.isMovingCell = true;\n    this.graphInstance.toolbar.hintMgr.setHint('moveNode');\n    this.graphInstance.toolbar.disable();\n    this.tableMask.startMask(targetCell);\n  }\n\n  public stopMoving() {\n    this.isMovingCell = false;\n    this.graphInstance.toolbar.hintMgr.setHint('idel');\n    this.graphInstance.toolbar.enable();\n    this.tableMask.stopMask();\n  }\n\n  public startResizing(targetCell: TableCell) {\n    this.isResizingCell = true;\n    this.graphInstance.toolbar.hintMgr.setHint('resizeNode');\n    this.graphInstance.toolbar.disable();\n    this.tableMask.startMask(targetCell);\n  }\n\n  public stopResizing() {\n    this.isResizingCell = false;\n    this.graphInstance.toolbar.hintMgr.setHint('idel');\n    this.graphInstance.toolbar.enable();\n    this.tableMask.stopMask();\n  }\n\n  // sumit cell position / size change\n  public submitCellChange() {\n    this.isMovingCell = false;\n    this.isResizingCell = false;\n    this.graphInstance.toolbar.enable();\n    this.tableMask.submitChange();\n  }\n\n  public setBottomControl() {\n    if (\n      this.graphInstance.mode === 'edit' &&\n      !this.bottomControlEL &&\n      this.graphInstance.options.totalRows < this.graphInstance.options.maxRows\n    ) {\n      this.bottomControlEL = createClassElement(\n        'div',\n        'flex flex-row items-center justify-between mt-15',\n        this.graphInstance.element,\n      );\n      // add row btn\n      new Button(this.bottomControlEL, {\n        icon: 'plus',\n        label: this.graphInstance.options.labels.addRow,\n        className: 'flex-1',\n        onClick: () => {\n          if (typeof this.graphInstance.options.addRow === 'function') {\n            this.graphInstance.options.addRow();\n          } else {\n            this.graphInstance.refresh(\n              Object.assign({}, this.graphInstance.options, {\n                totalRows: this.graphInstance.options.totalRows + 1,\n              }),\n            );\n            if (typeof this.graphInstance.options.onAddRow === 'function') {\n              this.graphInstance.options.onAddRow();\n            }\n          }\n        },\n      });\n    } else {\n      if (this.bottomControlEL) {\n        removeElement(this.bottomControlEL);\n        this.bottomControlEL = null;\n      }\n    }\n  }\n\n  // render table header\n  createHeader() {\n    if (this.graphInstance.options.tableLayoutFixed) {\n      setStyles(this.element, { tableLayout: 'fixed' });\n    }\n    if (this.graphInstance.options.columns && this.graphInstance.options.columns.length > 0) {\n      const tr = createClassElement('tr', 'tfgraph-tr');\n      this.graphInstance.options.columns.forEach((column, index) => {\n        const headerCell = new TableHeaderCell(tr, column, index, this.graphInstance);\n        this.headerCells.push(headerCell);\n      });\n      this.element.appendChild(tr);\n    }\n  }\n\n  // render table rows and tds\n  createTds() {\n    for (let i = 0; i < this.graphInstance.options.totalRows; i++) {\n      const tr = createClassElement('tr', 'tfgraph-tr');\n      tr.setAttribute('id', `${this.graphInstance.id}_tr_${i}`);\n      const occupiedRow: number[] = [];\n      this.occupiedList.push(occupiedRow);\n      for (let j = 0; j < this.graphInstance.options.totalColumns; j++) {\n        const td = createClassElement('td', 'tfgraph-td', tr);\n        td.setAttribute('id', `${this.graphInstance.id}_td_${i}_${j}`);\n        occupiedRow.push(0);\n      }\n      this.element.appendChild(tr);\n    }\n  }\n\n  // render tabel cells\n  createCells() {\n    // spaned table cell id array\n    const spanedTdIds = [];\n    const nodes = this.graphInstance.options.nodes;\n    if (nodes && nodes.length > 0) {\n      nodes.forEach((node) => {\n        // set spanned tabel cell ids\n        if (node.colSpan > 1 || node.rowSpan > 1) {\n          for (let i = node.column; i < node.column + node.colSpan; i++) {\n            for (let j = node.row; j < node.row + node.rowSpan; j++) {\n              if (!(i === node.column && j === node.row)) {\n                spanedTdIds.push(`${this.graphInstance.id}_td_${j}_${i}`);\n                this.occupiedList[j][i] = 1;\n              }\n            }\n          }\n        }\n      });\n    }\n\n    // remove spaned tabell cell element\n    spanedTdIds.forEach((id) => removeElement(document.getElementById(id)));\n\n    // create table cells\n    for (let i = 0; i < this.graphInstance.options.totalRows; i++) {\n      for (let j = 0; j < this.graphInstance.options.totalColumns; j++) {\n        if (!spanedTdIds.includes(`${this.graphInstance.id}_td_${i}_${j}`)) {\n          const targetNode =\n            nodes && nodes.length > 0\n              ? nodes.find((node) => node.row === i && node.column === j)\n              : null;\n          const targetTd = document.getElementById(`${this.graphInstance.id}_td_${i}_${j}`);\n          if (targetNode) {\n            targetTd.setAttribute('colSpan', targetNode.colSpan.toString());\n            targetTd.setAttribute('rowSpan', targetNode.rowSpan.toString());\n            this.occupiedList[i][j] = 1;\n          }\n          this.cells.push(new TableCell(targetTd, targetNode, i, j, this.graphInstance));\n        }\n      }\n    }\n  }\n}\n","// import { TableFlowGraph } from '../index';\nimport { createClassElement, removeElement } from '../../lib/dom';\nimport { LineOptions, Position } from '../../types';\nimport LineGroup from './LineGroup';\n\n/**\n * table-flow-graph line\n */\nexport default class LineSegment {\n  public element: HTMLElement;\n  public thickness: number;\n  public startPointEl: HTMLElement;\n  public endArrowEl: HTMLElement;\n\n  constructor(parent: LineGroup, options: LineOptions) {\n    this.element = createClassElement('div', 'tfgraph-line', parent.element);\n    const { positionA, positionB, thickness = 2, isStart = true, isEnd = true } = options;\n    this.thickness = thickness;\n    if (isStart) this.toggleStartPoint();\n    if (isEnd) this.toggleEndArrow();\n    this.drawLine(positionA, positionB);\n    this.element.addEventListener('mouseenter', () => parent.setHovered(true));\n    this.element.addEventListener('mouseleave', () => parent.setHovered(false));\n    this.element.addEventListener('dblclick', () => parent.onDoubleClick());\n  }\n\n  public setHoverd(hovered = true) {\n    if (hovered) {\n      this.element.classList.add('hovered');\n    } else {\n      this.element.classList.remove('hovered');\n    }\n  }\n\n  public drawLine(positionA: Position, positionB: Position) {\n    // start point\n    const x1 = positionA.x;\n    const y1 = positionA.y;\n    // end point\n    const x2 = positionB.x;\n    const y2 = positionB.y;\n\n    // distance\n    const length = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n\n    // center\n    const cx = (x1 + x2) / 2 - length / 2;\n    const cy = (y1 + y2) / 2 - this.thickness / 2;\n    // angle\n    const angle = Math.atan2(y2 - y1, x2 - x1) * (180 / Math.PI);\n\n    this.element.style.width = length + this.thickness + 'px';\n    this.element.style.height = this.thickness + 'px';\n    this.element.style.left = cx - 0.5 * this.thickness + 'px';\n    this.element.style.top = cy + 'px';\n    this.element.style.borderRadius = this.thickness + 'px';\n    this.element.style.transform = `rotate(${angle}deg)`;\n  }\n\n  public toggleStartPoint() {\n    if (this.startPointEl) {\n      removeElement(this.startPointEl);\n    } else {\n      this.startPointEl = createClassElement('div', 'start-point', this.element);\n    }\n  }\n\n  public toggleEndArrow() {\n    if (this.endArrowEl) {\n      removeElement(this.endArrowEl);\n    } else {\n      this.endArrowEl = createClassElement('div', 'arrow', this.element);\n    }\n  }\n}\n","import { TableFlowGraph } from '../../index';\nimport { createClassElement, removeElement } from '../../lib/dom';\nimport { LineGroupOptions, Position } from '../../types';\nimport Anchor from '../anchor/Anchor';\nimport LineSegment from './LineSegment';\n\n/**\n * table-flow-graph line group\n */\nexport default class LineGroup {\n  public element: HTMLElement;\n  public isDrawingActive: boolean;\n  public anchorIds: string[];\n  public anchors: Anchor[];\n  public cursorLine: LineSegment; // line currently drawing at end\n  public lines: LineSegment[];\n  public cursorLineStartPosition: Position;\n  public graphInstance: TableFlowGraph;\n  public hovered: boolean; // is mouse hover\n\n  constructor(\n    parentElement: HTMLElement,\n    options: LineGroupOptions,\n    graphInstance: TableFlowGraph,\n  ) {\n    this.element = createClassElement('div', 'tfgraph-line-group', parentElement);\n    this.isDrawingActive = options.isDrawingActive;\n    this.anchorIds = options.anchorIds;\n    this.graphInstance = graphInstance;\n    this.drawLines();\n  }\n\n  public addLineSegment(anchorId) {\n    if (!this.anchorIds.includes(anchorId)) {\n      this.anchorIds.push(anchorId);\n      this.drawLines();\n    }\n  }\n\n  public onDoubleClick() {\n    if (this.hovered) {\n      if (this.isDrawingActive) {\n        this.graphInstance.lineController.endDrawLine();\n      } else {\n        this.graphInstance.lineController.removeLineGroup(this);\n      }\n    }\n  }\n\n  public drawLines() {\n    this.anchors = [];\n    this.lines = [];\n    if (this.anchorIds.length === 0) return;\n    this.anchorIds.forEach((anchorId) => {\n      const targetAnchor = this.graphInstance.anchorController.anchors.find(\n        (anchor) => anchor.id === anchorId,\n      );\n      if (targetAnchor) {\n        this.anchors.push(targetAnchor);\n      }\n    });\n    this.element.innerHTML = '';\n    const pointList: Position[] = this.anchors.map((anchor) => ({\n      x: anchor.posX,\n      y: anchor.posY,\n    }));\n    if (pointList.length > 1) {\n      for (let i = 0; i < pointList.length - 1; i++) {\n        const line = new LineSegment(this, {\n          positionA: pointList[i],\n          positionB: pointList[i + 1],\n          thickness: 2,\n          isStart: i === 0,\n          isEnd: i === pointList.length - 2 && !this.isDrawingActive,\n        });\n        this.lines.push(line);\n      }\n    }\n    // add line between last anchor position and mouse position when drawing\n    if (this.isDrawingActive) {\n      this.cursorLineStartPosition = pointList[pointList.length - 1];\n      // draw cursor line\n      this.cursorLine = new LineSegment(this, {\n        positionA: this.cursorLineStartPosition,\n        positionB: this.graphInstance.mousePosition,\n        thickness: 2,\n        isStart: pointList.length === 0,\n        isEnd: true,\n      });\n      this.lines.push(this.cursorLine);\n    }\n  }\n\n  public setHovered(hovered = true) {\n    if (this.graphInstance.mode === 'edit') {\n      this.hovered = hovered;\n      this.lines.forEach((line) => {\n        line.setHoverd(hovered);\n      });\n      if (!this.isDrawingActive) {\n        this.graphInstance.toolbar.hintMgr.setHint(hovered ? 'hoverLine' : 'idel');\n      }\n    }\n  }\n\n  public endDrawing() {\n    // removeElement(this.cursorLine.element);\n    this.isDrawingActive = false;\n    this.drawLines();\n  }\n\n  public escapeDrawing() {\n    if (this.cursorLine) {\n      if (this.anchorIds.length > 0) {\n        this.anchorIds.pop();\n        if (this.anchorIds.length === 0) {\n          removeElement(this.element);\n          // remove the last anchor id in this line group\n          this.graphInstance.lineController.lineAnchorIds =\n            this.graphInstance.lineController.lineAnchorIds.filter(\n              (lineArray) => lineArray.length > 1,\n            );\n          this.graphInstance.lineController.endDrawLine();\n        } else {\n          this.drawLines();\n        }\n      }\n    }\n  }\n\n  public onMouseMove(graphInstance: TableFlowGraph) {\n    if (this.cursorLine) {\n      let targetPosition = graphInstance.mousePosition;\n      // snap to hovered anchor\n      if (\n        graphInstance.anchorController.hoveredAnchor &&\n        !this.anchorIds.includes(graphInstance.anchorController.hoveredAnchor.id)\n      ) {\n        targetPosition = {\n          x: graphInstance.anchorController.hoveredAnchor.posX,\n          y: graphInstance.anchorController.hoveredAnchor.posY,\n        };\n      }\n      this.cursorLine.drawLine(this.cursorLineStartPosition, targetPosition);\n    }\n  }\n}\n","import { cloneDeep, isEqual } from 'lodash-es';\nimport { TableFlowGraph } from '../../index';\nimport { createClassElement, removeElement, setStyles } from '../../lib/dom';\nimport LineGroup from './LineGroup';\n\n/**\n * table-flow-graph lines controller\n */\nexport default class LineController {\n  public element: HTMLElement;\n  public lineAnchorIds: string[][]; // anchor ids to draw lines\n  public originLineAnchorIds: string[][]; // compare to lineAnchorIds to determine if lines are changed\n  public isDrawingLine: boolean;\n  public currentDrawingLine: LineGroup;\n  public graphInstance: TableFlowGraph;\n  public canDeleteColumn: boolean;\n  public canDeleteRow: boolean;\n\n  constructor(graphInstance: TableFlowGraph) {\n    this.graphInstance = graphInstance;\n    this.element = createClassElement('div', 'tfgraph-line-layer', this.graphInstance.element);\n    const { options } = this.graphInstance;\n    // this.options.mode = options.mode ? options.mode : 'view';\n    if (options.lines && Array.isArray(options.lines)) {\n      this.lineAnchorIds = options.lines;\n    } else {\n      this.lineAnchorIds = [];\n    }\n    this.originLineAnchorIds = cloneDeep(this.lineAnchorIds);\n  }\n\n  public renderLines() {\n    this.element.innerHTML = '';\n    this.lineAnchorIds.forEach((lineGroup) => {\n      new LineGroup(\n        this.element,\n        { anchorIds: lineGroup, isDrawingActive: false },\n        this.graphInstance,\n      );\n    });\n    this.setColAndRowDeletable();\n  }\n\n  public startDrawLine() {\n    this.isDrawingLine = true;\n    this.graphInstance.toolbar.disable();\n    this.graphInstance.toolbar.hintMgr.setHint('drawLine');\n    // set lines layer below anchors layer when draing line\n    setStyles(this.element, { zIndex: '1' });\n    setStyles(this.graphInstance.anchorController.element, { zIndex: '2' });\n\n    this.originLineAnchorIds = cloneDeep(this.lineAnchorIds);\n  }\n\n  public endDrawLine() {\n    this.isDrawingLine = false;\n    this.graphInstance.toolbar.enable();\n    // set lines layer above anchors layer when draing line\n    setStyles(this.element, { zIndex: '2' });\n    setStyles(this.graphInstance.anchorController.element, { zIndex: '1' });\n\n    if (this.currentDrawingLine) {\n      this.currentDrawingLine.endDrawing();\n      if (this.currentDrawingLine.anchorIds.length <= 1) {\n        this.removeLineGroup(this.currentDrawingLine);\n      }\n      this.currentDrawingLine = undefined;\n    }\n    if (!isEqual(this.originLineAnchorIds, this.lineAnchorIds)) {\n      this.originLineAnchorIds = cloneDeep(this.lineAnchorIds);\n      // trigger event: linesChanged\n      this.onChangeLines();\n    }\n  }\n\n  setColAndRowDeletable() {\n    const totalRows = this.graphInstance.options.totalRows;\n    const totalColumns = this.graphInstance.options.totalColumns;\n    this.canDeleteColumn = true;\n    this.canDeleteRow = true;\n    this.lineAnchorIds.forEach((line) => {\n      line.forEach((id) => {\n        const idArray = id.split('_');\n        const row = idArray[1];\n        const col = idArray[2];\n        if (parseInt(col) === totalColumns - 1) {\n          this.canDeleteColumn = false;\n        }\n        if (parseInt(row) === totalRows - 1) {\n          this.canDeleteRow = false;\n        }\n      });\n    });\n  }\n\n  public onChangeLines() {\n    this.setColAndRowDeletable();\n    this.graphInstance.options = Object.assign({}, this.graphInstance.options, {\n      lines: this.lineAnchorIds,\n    });\n    this.graphInstance.toolbar.hintMgr.setHint('idel');\n    if (typeof this.graphInstance.options.onChangeLines === 'function') {\n      this.graphInstance.options.onChangeLines(this.lineAnchorIds);\n    }\n  }\n\n  public removeLineGroup(line: LineGroup) {\n    removeElement(line.element);\n    this.lineAnchorIds = this.lineAnchorIds.filter((lines) => !isEqual(lines, line.anchorIds));\n    if (!isEqual(this.lineAnchorIds, this.originLineAnchorIds)) {\n      this.originLineAnchorIds = cloneDeep(this.lineAnchorIds);\n      // trigger event: linesChanged\n      this.onChangeLines();\n    }\n  }\n\n  public createLineGroup(anchorId) {\n    this.startDrawLine();\n    this.lineAnchorIds.push([anchorId]);\n    this.currentDrawingLine = new LineGroup(\n      this.element,\n      { anchorIds: this.lineAnchorIds[this.lineAnchorIds.length - 1], isDrawingActive: true },\n      this.graphInstance,\n    );\n  }\n\n  public addLineSegment(anchorId) {\n    if (this.isDrawingLine && this.currentDrawingLine) {\n      this.currentDrawingLine.addLineSegment(anchorId);\n    }\n  }\n\n  public onMouseMove() {\n    if (this.isDrawingLine && this.currentDrawingLine) {\n      this.currentDrawingLine.onMouseMove(this.graphInstance);\n    }\n  }\n}\n","import { TableFlowGraph } from '../../index';\nimport { createClassElement } from '../../lib/dom';\nimport { Bearing } from '../../types';\n\n// | 'topleft'\n// | 'top'\n// | 'topright'\n// | 'left'\n// | 'center'\n// | 'right'\n// | 'bottomleft'\n// | 'bottom'\n// | 'bottomright';\n\nconst getBearingShort = (bearing: Bearing) => {\n  let shortBearing = 't';\n  switch (bearing) {\n    case 'topleft':\n      shortBearing = 'tl';\n      break;\n    case 'top':\n      shortBearing = 't';\n      break;\n    case 'topright':\n      shortBearing = 'tr';\n      break;\n    case 'left':\n      shortBearing = 'l';\n      break;\n    case 'center':\n      shortBearing = 'c';\n      break;\n    case 'right':\n      shortBearing = 'r';\n      break;\n    case 'bottomleft':\n      shortBearing = 'bl';\n      break;\n    case 'bottom':\n      shortBearing = 'b';\n      break;\n    case 'bottomright':\n      shortBearing = 'br';\n      break;\n    default:\n      break;\n  }\n  return shortBearing;\n};\n\n/**\n * Anchor point for drawing lines\n */\nexport default class Anchor {\n  // element of this Anchor\n  public element: HTMLElement;\n  // the bearing relative to this anchor's parent table cell\n  public bearing: Bearing;\n  public elementTr: HTMLElement;\n  public elementCol: HTMLElement;\n  // is the anchor on table cell border or on inner block border(top / bottom)\n  public isOffsetX: boolean;\n  // is the anchor on table cell border or on inner block border(left / right)\n  public isOffsetY: boolean;\n  // id for this Anchor class\n  public id = '';\n  // x position relative to table area\n  public posX = 0;\n  // y position relative to table area\n  public posY = 0;\n  public row: number;\n  public column: number;\n  public hidden = false;\n\n  constructor(\n    bearing: Bearing,\n    row: number,\n    column: number,\n    graphInstance: TableFlowGraph,\n    isOffsetX = false,\n    isOffsetY = false,\n  ) {\n    this.bearing = bearing;\n    this.isOffsetX = isOffsetX;\n    this.isOffsetY = isOffsetY;\n    this.row = row;\n    this.column = column;\n    this.elementTr = document.getElementById(`${graphInstance.id}_tr_${row}`);\n    this.elementCol = document.getElementById(`${graphInstance.id}_col_${column}`);\n    if (this.elementTr && this.elementCol) {\n      // create dom elements\n      this.element = createClassElement(\n        'div',\n        'tfgraph-anchor',\n        graphInstance.anchorController.element,\n      );\n      createClassElement('div', 'tfgraph-anchor-point', this.element);\n      const area = createClassElement('div', 'tfgraph-anchor-area', this.element);\n      createClassElement('div', 'tfgraph-anchor-circle', area);\n\n      // set Anchor instance id; 'ox' meaning offsetX, 'nx' meaning normalX\n      this.id = `a_${row}_${column}_${getBearingShort(bearing)}_${isOffsetX ? 'ox' : 'nx'}_${\n        isOffsetY ? 'oy' : 'ny'\n      }`;\n      // set dom id\n      this.element.setAttribute('id', `${graphInstance.id}_${this.id}`);\n\n      graphInstance.anchorController.anchors.push(this);\n      this.setVisible(graphInstance.mode === 'edit');\n      // setTimeout(() => this.setPosition(), 1);\n      this.setPosition();\n      this.element.addEventListener('click', () => {\n        if (!graphInstance.lineController.isDrawingLine) {\n          graphInstance.lineController.createLineGroup(this.id);\n        } else {\n          graphInstance.lineController.addLineSegment(this.id);\n        }\n      });\n      this.element.addEventListener('mouseenter', () => {\n        graphInstance.anchorController.setHoveredAnchor(this);\n      });\n      this.element.addEventListener('mouseleave', () => {\n        if (graphInstance.anchorController.hoveredAnchor.id === this.id) {\n          graphInstance.anchorController.setHoveredAnchor(null);\n        }\n      });\n      // dblclick to finish drawing lines\n      this.element.addEventListener('dblclick', () => {\n        if (graphInstance.lineController.isDrawingLine) {\n          graphInstance.lineController.endDrawLine();\n        }\n      });\n    }\n  }\n\n  setOnePosition(x, y) {\n    this.posX = x;\n    this.posY = y;\n    this.element.style.left = x + 'px';\n    this.element.style.top = y + 'px';\n    this.element.setAttribute('title', `xpos & ypos=${x},${y}`);\n  }\n\n  public setVisible(visible: boolean) {\n    if (visible) {\n      this.element.classList.remove('hidden');\n    } else {\n      this.element.classList.add('hidden');\n    }\n  }\n\n  public setPosition() {\n    const x_left = this.elementCol.offsetLeft + (this.isOffsetX ? 15 : 0);\n    const x_center = this.elementCol.offsetLeft + 0.5 * this.elementCol.offsetWidth;\n    const x_right =\n      this.elementCol.offsetLeft + this.elementCol.offsetWidth - (this.isOffsetX ? 15 : 0);\n    const y_top = this.elementTr.offsetTop + (this.isOffsetY ? 15 : 0);\n    const y_center = this.elementTr.offsetTop + 0.5 * this.elementTr.offsetHeight;\n    const y_bottom =\n      this.elementTr.offsetTop + this.elementTr.offsetHeight - (this.isOffsetY ? 15 : 0);\n\n    switch (this.bearing) {\n      case 'topleft':\n        this.setOnePosition(x_left, y_top);\n        break;\n      case 'top':\n        this.setOnePosition(x_center, y_top);\n        break;\n      case 'topright':\n        this.setOnePosition(x_right, y_top);\n        break;\n      case 'right':\n        this.setOnePosition(x_right, y_center);\n        break;\n      case 'bottomright':\n        this.setOnePosition(x_right, y_bottom);\n        break;\n      case 'bottom':\n        this.setOnePosition(x_center, y_bottom);\n        break;\n      case 'bottomleft':\n        this.setOnePosition(x_left, y_bottom);\n        break;\n      case 'left':\n        this.setOnePosition(x_left, y_center);\n        break;\n      case 'center':\n        this.setOnePosition(x_center, y_center);\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import { TableFlowGraph } from '../../index';\nimport { createClassElement } from '../../lib/dom';\nimport TableCell from '../table/TableCell';\nimport Anchor from './Anchor';\n\n/**\n * table-flow-graph anchor controller\n */\nexport default class AnchorController {\n  public element: HTMLElement;\n  public anchors: Anchor[];\n  public hoveredAnchor: Anchor | null; // current Anchor that mouse hoverd\n  graphInstance: TableFlowGraph;\n\n  constructor(graphInstance: TableFlowGraph) {\n    this.graphInstance = graphInstance;\n    this.anchors = [];\n    this.element = createClassElement('div', 'tfgraph-anchor-layer', graphInstance.element);\n  }\n\n  public renderAnchors() {\n    this.element.innerHTML = '';\n    this.anchors = [];\n    this.graphInstance.tableController.cells.forEach((cell) => {\n      // console.log('cell:::::::::::', cell);\n      this.createAnchors(cell);\n    });\n  }\n\n  public setHoveredAnchor(anchor: Anchor | null) {\n    this.hoveredAnchor = anchor;\n    if (!this.graphInstance.lineController.isDrawingLine) {\n      if (anchor) {\n        this.graphInstance.toolbar.hintMgr.setHint('hoverAnchor');\n      } else {\n        this.graphInstance.toolbar.hintMgr.setHint('idel');\n      }\n    }\n  }\n\n  public resetPosition() {\n    if (this.anchors && this.anchors.length > 0) {\n      this.anchors.forEach((anchor) => {\n        anchor.setPosition();\n      });\n    }\n  }\n\n  public setAnchorsVisible(visible: boolean) {\n    if (this.anchors && this.anchors.length > 0) {\n      this.anchors.forEach((anchor: Anchor) => {\n        anchor.setVisible(visible);\n      });\n    }\n  }\n\n  // create anchors for one cell\n  createAnchors(cell: TableCell) {\n    for (let row = cell.row; row < cell.row + cell.rowSpan; row++) {\n      for (let col = cell.column; col < cell.column + cell.colSpan; col++) {\n        if (row === 0) {\n          new Anchor('top', row, col, this.graphInstance);\n          new Anchor('topright', row, col, this.graphInstance);\n          if (cell.column === 0) {\n            new Anchor('topleft', row, col, this.graphInstance);\n          }\n        }\n        if (col === 0) {\n          new Anchor('left', row, col, this.graphInstance);\n          new Anchor('bottomleft', row, col, this.graphInstance);\n        }\n        if (col === cell.column + cell.colSpan - 1) {\n          new Anchor('right', row, col, this.graphInstance);\n        }\n        if (row === cell.row + cell.rowSpan - 1) {\n          new Anchor('bottom', row, col, this.graphInstance);\n        }\n        if (col === cell.column + cell.colSpan - 1 || row === cell.row + cell.rowSpan - 1) {\n          new Anchor('bottomright', row, col, this.graphInstance);\n        }\n        if (cell.hasNode) {\n          if (col === cell.column) {\n            new Anchor('left', row, col, this.graphInstance, true, false);\n            if (row < cell.row + cell.rowSpan - 1) {\n              new Anchor('bottomleft', row, col, this.graphInstance, true, false);\n            }\n          }\n          if (col === cell.column + cell.colSpan - 1) {\n            new Anchor('right', row, col, this.graphInstance, true, false);\n            if (row < cell.row + cell.rowSpan - 1) {\n              new Anchor('bottomright', row, col, this.graphInstance, true, false);\n            }\n          }\n          if (row === cell.row) {\n            new Anchor('top', row, col, this.graphInstance, false, true);\n            if (col < cell.column + cell.colSpan - 1) {\n              new Anchor('topright', row, col, this.graphInstance, false, true);\n            }\n          }\n          if (row === cell.row + cell.rowSpan - 1) {\n            new Anchor('bottom', row, col, this.graphInstance, false, true);\n            if (col < cell.column + cell.colSpan - 1) {\n              new Anchor('bottomright', row, col, this.graphInstance, false, true);\n            }\n          }\n        }\n      }\n    }\n    if (!cell.hasNode) {\n      new Anchor('center', cell.row, cell.column, this.graphInstance);\n    }\n  }\n}\n","import './styles/index.scss';\nimport { createClassElement, setStyles } from './lib/dom';\nimport { debounce } from './lib/utils';\nimport { Mode, Position, TFGraphOptions } from './types';\nimport Toolbar from './components/toolbar/Toolbar';\nimport TableController from './components/table/TableController';\nimport LineController from './components/line/LineController';\nimport AnchorController from './components/anchor/AnchorController';\n\n// default options\nconst defaultOptions: TFGraphOptions = {\n  totalColumns: 8,\n  totalRows: 8,\n  maxColumns: 12,\n  maxRows: 30,\n  labels: {\n    editMode: 'Edit Mode',\n    previewMode: 'Preview Mode',\n    editColumn: 'Edit Column',\n    addColumn: 'Add Column',\n    deleteColumn: 'Delete Column',\n    addRow: 'Add Row',\n    deleteRow: 'Delete Row',\n    editNode: 'Edit Node',\n    addNode: 'Add Node',\n    deleteNode: 'Delete Node',\n    adjustNodeSize: 'Adjust Node Size',\n    moveNode: 'Move Node',\n    newNode: 'New Node',\n    enterNodeName: 'Enter node name',\n    enterColumnName: 'Enter column name',\n    confirm: 'Confirm',\n    cancel: 'Cancel',\n    hint_drawLine:\n      'Click another anchor to draw new line segment; press [ESC] to undo prev line segment; press [ENTER] or double click left mouse to finish drawing',\n    hint_hoverLine: 'Double click to delete this line',\n    hint_hoverAnchor: 'Click to start drawing lines',\n    hint_moveNode: 'Move cursor to move this node, click left mouse to confrim moving',\n    hint_resizeNode: 'Move cursor to resize this node, click left mouse to confrim resizing',\n  },\n};\n\nexport class TableFlowGraph {\n  public element: HTMLElement;\n  public baseElement: HTMLElement;\n  public options: TFGraphOptions;\n  public id: string;\n  public toolbar: Toolbar;\n  public isAlive: boolean;\n  public hasTableHeader: boolean;\n  public mode: Mode;\n  public mousePosition: Position;\n  public tableController: TableController;\n  public lineController: LineController;\n  public anchorController: AnchorController;\n\n  constructor(el: HTMLElement, options: TFGraphOptions) {\n    if (!el) {\n      throw new Error('no element is specified to initialize TableFlowGraph');\n    } else {\n      this.baseElement = el;\n    }\n\n    // use id as unique key, to support multiple table-flow-graph instances in one page.\n    if (this.baseElement.getAttribute('id')) {\n      this.id = this.baseElement.getAttribute('id');\n    } else {\n      this.id = 'id' + (Math.random() * 100000).toFixed(0);\n    }\n\n    this.init(options);\n\n    window.addEventListener('resize', this, false);\n    window.addEventListener('keydown', this, false);\n    window.addEventListener('mousemove', this, false);\n\n    this.isAlive = true;\n  }\n\n  public init(options: TFGraphOptions) {\n    this.baseElement.innerHTML = '';\n\n    this.options = Object.assign({}, defaultOptions, options);\n    if (options.labels) {\n      this.options.labels = Object.assign({}, defaultOptions.labels, options.labels);\n    }\n    // set totalRows\n    if (typeof this.options.rows !== 'undefined') {\n      this.options.totalRows = this.options.rows.length;\n    }\n    // set totalColumns and hasTableHeader\n    if (this.options.columns && this.options.columns.length > 0) {\n      this.options.totalColumns = this.options.columns.length;\n      this.hasTableHeader = true;\n    } else {\n      this.options.columns = [];\n      this.hasTableHeader = false;\n      for (let i = 0; i < this.options.totalColumns; i++) {\n        this.options.columns.push({\n          width: 'auto',\n        });\n      }\n    }\n\n    // restrain totalRows and totalColumns\n    if (this.options.totalRows > this.options.maxRows) {\n      this.options.totalRows = this.options.maxRows;\n    }\n    if (this.options.totalColumns > this.options.maxColumns) {\n      this.options.totalColumns = this.options.maxColumns;\n    }\n\n    // filter nodes that exceeds totalRows and totalColumns\n    if (this.options.nodes && this.options.nodes.length > 0) {\n      this.options.nodes = this.options.nodes.filter(\n        (node) =>\n          node.row + node.rowSpan - 1 <= this.options.totalRows &&\n          node.column + node.colSpan - 1 <= this.options.totalColumns,\n      );\n    }\n\n    // create toolbar and edit state\n    if (this.options.isEditor) {\n      this.mode = 'edit';\n      this.toolbar = new Toolbar(this.baseElement, this);\n    } else {\n      this.mode = 'preview';\n    }\n\n    // create root dom elements and controllers\n    this.element = createClassElement('div', 'tfgraph', this.baseElement);\n    if (this.mode === 'edit') this.element.classList.add('edit');\n    this.lineController = new LineController(this);\n    this.anchorController = new AnchorController(this);\n    this.tableController = new TableController(this);\n\n    this.render();\n  }\n\n  public render() {\n    // render table\n    this.tableController.renderTable();\n\n    // wait for table render ready; TODO set anchor position relative to table cells\n    setTimeout(() => {\n      // render anchors\n      this.anchorController.renderAnchors();\n      // render lines\n      this.lineController.renderLines();\n    }, 1);\n  }\n\n  handleResize = () => {\n    // TODO detailed resize management\n    // this.anchorController.resetPosition();\n    this.refresh();\n  };\n  debouncedHandleResize = debounce(this.handleResize, 500);\n\n  // handle addEventListener events\n  handleEvent(event) {\n    switch (event.type) {\n      case 'resize':\n        this.debouncedHandleResize();\n        break;\n      case 'mousemove':\n        this.onMourseMove(event);\n        break;\n      case 'keydown':\n        this.onKeydown(event);\n        break;\n      default:\n        break;\n    }\n  }\n\n  onMourseMove(event) {\n    const rect = this.element.getBoundingClientRect();\n    const offsetX = event.clientX - rect.left;\n    const offsetY = event.clientY - rect.top;\n    this.mousePosition = { x: offsetX, y: offsetY };\n    this.lineController.onMouseMove();\n    this.tableController.onMouseMove();\n  }\n\n  onKeydown = (e) => {\n    if (e.code === 'Enter') {\n      // press enter to finish drawing line\n      if (this.lineController.isDrawingLine) {\n        this.lineController.endDrawLine();\n      }\n    } else if (e.code === 'Escape') {\n      // press esc to cancel last anchor point when drawing line\n      if (this.lineController.isDrawingLine) {\n        this.lineController.currentDrawingLine.escapeDrawing();\n      }\n      if (this.tableController.isMovingCell) {\n        this.tableController.stopMoving();\n      }\n      if (this.tableController.isResizingCell) {\n        this.tableController.stopResizing();\n      }\n    }\n  };\n\n  public refresh(options?: TFGraphOptions) {\n    if (!this.isAlive) {\n      return;\n    } else {\n      setTimeout(() => {\n        const height = this.baseElement.getBoundingClientRect().height;\n        // maintain consistent height when rerendering dom elements\n        setStyles(this.baseElement, { height: height + 'px' });\n        this.init(options ? options : this.options);\n        setStyles(this.baseElement, { height: 'auto' });\n      });\n    }\n  }\n\n  public destroy() {\n    if (!this.isAlive) {\n      return;\n    }\n\n    window.removeEventListener('resize', this, false);\n    window.removeEventListener('keydown', this, false);\n    window.removeEventListener('mousemove', this, false);\n\n    this.isAlive = false;\n  }\n\n  public changeMode(mode: Mode) {\n    if (this.mode !== mode) {\n      this.mode = mode;\n      if (mode === 'edit') {\n        this.element.classList.add('edit');\n      } else {\n        this.element.classList.remove('edit');\n      }\n      this.anchorController.setAnchorsVisible(mode === 'edit');\n      this.tableController.renderTable();\n    }\n  }\n}\n"],"names":["remove","cloneDeep","isEqual","TableController"],"mappings":"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"}